{"ast":null,"code":"import * as XLSX from 'xlsx';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { MatSort } from '@angular/material/sort';\nimport { EditEmployeeModalComponent } from '../editemployeemodal/editemployeemodal.component';\nimport { getAttr } from 'src/app/utils/general';\nimport { GenderArray } from '../../../../types/employee';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"src/app/modules/_services/employee.service\";\nimport * as i3 from \"src/app/modules/auth\";\nimport * as i4 from \"src/app/modules/_services/db-common.service\";\nimport * as i5 from \"src/app/modules/_services/common.service\";\nimport * as i6 from \"ngx-toastr\";\nimport * as i7 from \"src/app/modules/_services/excel-parser.service\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@ng-select/ng-select\";\nimport * as i11 from \"@angular/material/table\";\nimport * as i12 from \"@angular/material/sort\";\nimport * as i13 from \"@angular/material/form-field\";\nimport * as i14 from \"@angular/material/input\";\nimport * as i15 from \"@angular/material/icon\";\n\nfunction ImportEmployeeMasterComponent_ng_option_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sampleFileType_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", sampleFileType_r4.shortname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.lang == \"en\" ? sampleFileType_r4.refnamE1 : sampleFileType_r4.refnamE2);\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function ImportEmployeeMasterComponent_div_35_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.importEmployeeData());\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.lang == \"en\" ? ctx_r2.formBodyLabels[0].btnDataImport.title : ctx_r2.formBodyLabels[0].btnDataImport.arabicTitle, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 72);\n    i0.ɵɵtext(1, \" Action \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r61 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 73)(1, \"div\", 74)(2, \"span\", 75);\n    i0.ɵɵlistener(\"click\", function ImportEmployeeMasterComponent_div_36_td_14_Template_span_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r61);\n      const item_r59 = restoredCtx.$implicit;\n      const ctx_r60 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r60.editEmployee(item_r59));\n    });\n    i0.ɵɵelement(3, \"i\", 76);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 77);\n    i0.ɵɵlistener(\"click\", function ImportEmployeeMasterComponent_div_36_td_14_Template_span_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r61);\n      const item_r59 = restoredCtx.$implicit;\n      const ctx_r62 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r62.removeEmployee(item_r59));\n    });\n    i0.ɵɵelement(5, \"i\", 78);\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 72);\n    i0.ɵɵtext(1, \" Exception \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_17_ng_template_1_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 82);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const except_r67 = ctx.$implicit;\n    const i_r68 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i_r68 + 1, \".\", except_r67, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_17_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ImportEmployeeMasterComponent_div_36_td_17_ng_template_1_div_0_Template, 2, 2, \"div\", 81);\n  }\n\n  if (rf & 2) {\n    const item_r63 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngForOf\", item_r63.exceptions);\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_17_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \"Accepted\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 79);\n    i0.ɵɵtemplate(1, ImportEmployeeMasterComponent_div_36_td_17_ng_template_1_Template, 1, 1, \"ng-template\", 80);\n    i0.ɵɵtemplate(2, ImportEmployeeMasterComponent_div_36_td_17_ng_template_2_Template, 2, 0, \"ng-template\", 80);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r63 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r63.exceptions.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r63.exceptions.length == 0);\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 83);\n    i0.ɵɵtext(1, \" EmployeeUnivNo \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 84);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r70 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r70.EmployeeUnivNo, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 85);\n    i0.ɵɵtext(1, \" EnglishNAme \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 73)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r71 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r71.EnglishNAme);\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 85);\n    i0.ɵɵtext(1, \" ArabicNAme \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 73)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r72 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r72.ArabicNAme);\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 85);\n    i0.ɵɵtext(1, \" JoinedDate \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r73 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r73.JoinedDate, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" PFNo \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 88);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r74 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r74.PFNo, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" SubscribedDate \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r75 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r75.SubscribedDate, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" MemStatus \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r76 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r76.MemStatus, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" AgreedSubmt \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r77 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r77.AgreedSubmt, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" AmountReceivedTillNow \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 88);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r78 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r78.AmountReceivedTillNow, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" LastSalary \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r79 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r79.LastSalary, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" TerminationDate \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r80 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r80.TerminationDate, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" Occupation \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r81 = ctx.$implicit;\n    const ctx_r36 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(item_r81.Occupation == 0 ? \"text-danger\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r36.occupationName(item_r81.Occupation));\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" Gender \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r82 = ctx.$implicit;\n    const ctx_r38 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(item_r82.Gender == 0 ? \"text-danger\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r38.genderName(item_r82.Gender));\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" Mobile \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r83 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r83.Mobile, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" CivilID \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r84 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r84.CivilID, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_64_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" Birthday \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r85 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r85.Birthday, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" Department \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r86 = ctx.$implicit;\n    const ctx_r46 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(item_r86.Department == 0 ? \"text-danger\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r46.departmentName(item_r86.Department));\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" ContractType \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r87 = ctx.$implicit;\n    const ctx_r48 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(item_r87.ContractType == 0 ? \"text-danger\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r48.contractTypeName(item_r87.ContractType));\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" Email \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_74_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r88 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r88.Email, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" EmpPaciNo \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r89 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r89.EmpPaciNo, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" Nationality \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_80_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r90 = ctx.$implicit;\n    const ctx_r54 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(item_r90.Nationality == 0 ? \"text-danger\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r54.nationalityName(item_r90.Nationality));\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_th_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 87);\n    i0.ɵɵtext(1, \" NextToKin \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_td_83_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r91 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r91.NextToKin, \" \");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_tr_84_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 89);\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_tr_85_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 90);\n  }\n\n  if (rf & 2) {\n    const item_r92 = ctx.$implicit;\n    i0.ɵɵclassMap(item_r92.previous_Amount == item_r92.amount ? \"\" : \"highlightRow\");\n  }\n}\n\nfunction ImportEmployeeMasterComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r94 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 30)(2, \"form\", 31)(3, \"mat-form-field\", 32)(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Search\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 33);\n    i0.ɵɵelementStart(7, \"mat-icon\", 34);\n    i0.ɵɵtext(8, \"search\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mat-icon\", 35);\n    i0.ɵɵlistener(\"click\", function ImportEmployeeMasterComponent_div_36_Template_mat_icon_click_9_listener() {\n      i0.ɵɵrestoreView(_r94);\n      const ctx_r93 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r93.clearFilter());\n    });\n    i0.ɵɵtext(10, \"close\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"table\", 36);\n    i0.ɵɵelementContainerStart(12, 37);\n    i0.ɵɵtemplate(13, ImportEmployeeMasterComponent_div_36_th_13_Template, 2, 0, \"th\", 38);\n    i0.ɵɵtemplate(14, ImportEmployeeMasterComponent_div_36_td_14_Template, 6, 0, \"td\", 39);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(15, 40);\n    i0.ɵɵtemplate(16, ImportEmployeeMasterComponent_div_36_th_16_Template, 2, 0, \"th\", 38);\n    i0.ɵɵtemplate(17, ImportEmployeeMasterComponent_div_36_td_17_Template, 3, 2, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(18, 42);\n    i0.ɵɵtemplate(19, ImportEmployeeMasterComponent_div_36_th_19_Template, 2, 0, \"th\", 43);\n    i0.ɵɵtemplate(20, ImportEmployeeMasterComponent_div_36_td_20_Template, 2, 1, \"td\", 44);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(21, 45);\n    i0.ɵɵtemplate(22, ImportEmployeeMasterComponent_div_36_th_22_Template, 2, 0, \"th\", 46);\n    i0.ɵɵtemplate(23, ImportEmployeeMasterComponent_div_36_td_23_Template, 3, 1, \"td\", 39);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(24, 47);\n    i0.ɵɵtemplate(25, ImportEmployeeMasterComponent_div_36_th_25_Template, 2, 0, \"th\", 46);\n    i0.ɵɵtemplate(26, ImportEmployeeMasterComponent_div_36_td_26_Template, 3, 1, \"td\", 39);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(27, 48);\n    i0.ɵɵtemplate(28, ImportEmployeeMasterComponent_div_36_th_28_Template, 2, 0, \"th\", 46);\n    i0.ɵɵtemplate(29, ImportEmployeeMasterComponent_div_36_td_29_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(30, 50);\n    i0.ɵɵtemplate(31, ImportEmployeeMasterComponent_div_36_th_31_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(32, ImportEmployeeMasterComponent_div_36_td_32_Template, 2, 1, \"td\", 52);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(33, 53);\n    i0.ɵɵtemplate(34, ImportEmployeeMasterComponent_div_36_th_34_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(35, ImportEmployeeMasterComponent_div_36_td_35_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(36, 54);\n    i0.ɵɵtemplate(37, ImportEmployeeMasterComponent_div_36_th_37_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(38, ImportEmployeeMasterComponent_div_36_td_38_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(39, 55);\n    i0.ɵɵtemplate(40, ImportEmployeeMasterComponent_div_36_th_40_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(41, ImportEmployeeMasterComponent_div_36_td_41_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(42, 56);\n    i0.ɵɵtemplate(43, ImportEmployeeMasterComponent_div_36_th_43_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(44, ImportEmployeeMasterComponent_div_36_td_44_Template, 2, 1, \"td\", 52);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(45, 57);\n    i0.ɵɵtemplate(46, ImportEmployeeMasterComponent_div_36_th_46_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(47, ImportEmployeeMasterComponent_div_36_td_47_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(48, 58);\n    i0.ɵɵtemplate(49, ImportEmployeeMasterComponent_div_36_th_49_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(50, ImportEmployeeMasterComponent_div_36_td_50_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(51, 59);\n    i0.ɵɵtemplate(52, ImportEmployeeMasterComponent_div_36_th_52_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(53, ImportEmployeeMasterComponent_div_36_td_53_Template, 3, 3, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(54, 60);\n    i0.ɵɵtemplate(55, ImportEmployeeMasterComponent_div_36_th_55_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(56, ImportEmployeeMasterComponent_div_36_td_56_Template, 3, 3, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(57, 61);\n    i0.ɵɵtemplate(58, ImportEmployeeMasterComponent_div_36_th_58_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(59, ImportEmployeeMasterComponent_div_36_td_59_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(60, 62);\n    i0.ɵɵtemplate(61, ImportEmployeeMasterComponent_div_36_th_61_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(62, ImportEmployeeMasterComponent_div_36_td_62_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(63, 63);\n    i0.ɵɵtemplate(64, ImportEmployeeMasterComponent_div_36_th_64_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(65, ImportEmployeeMasterComponent_div_36_td_65_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(66, 64);\n    i0.ɵɵtemplate(67, ImportEmployeeMasterComponent_div_36_th_67_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(68, ImportEmployeeMasterComponent_div_36_td_68_Template, 3, 3, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(69, 65);\n    i0.ɵɵtemplate(70, ImportEmployeeMasterComponent_div_36_th_70_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(71, ImportEmployeeMasterComponent_div_36_td_71_Template, 3, 3, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(72, 66);\n    i0.ɵɵtemplate(73, ImportEmployeeMasterComponent_div_36_th_73_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(74, ImportEmployeeMasterComponent_div_36_td_74_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(75, 67);\n    i0.ɵɵtemplate(76, ImportEmployeeMasterComponent_div_36_th_76_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(77, ImportEmployeeMasterComponent_div_36_td_77_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(78, 68);\n    i0.ɵɵtemplate(79, ImportEmployeeMasterComponent_div_36_th_79_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(80, ImportEmployeeMasterComponent_div_36_td_80_Template, 3, 3, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(81, 69);\n    i0.ɵɵtemplate(82, ImportEmployeeMasterComponent_div_36_th_82_Template, 2, 0, \"th\", 51);\n    i0.ɵɵtemplate(83, ImportEmployeeMasterComponent_div_36_td_83_Template, 2, 1, \"td\", 49);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(84, ImportEmployeeMasterComponent_div_36_tr_84_Template, 1, 0, \"tr\", 70);\n    i0.ɵɵtemplate(85, ImportEmployeeMasterComponent_div_36_tr_85_Template, 1, 2, \"tr\", 71);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.formGroup);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"dataSource\", ctx_r3.filteredEmployeeData);\n    i0.ɵɵadvance(73);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r3.displayedColumns)(\"matHeaderRowDefSticky\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r3.displayedColumns);\n  }\n}\n\nexport let ImportEmployeeMasterComponent = /*#__PURE__*/(() => {\n  class ImportEmployeeMasterComponent {\n    constructor(dialog, cdr, employeeService, authService, commonDbService, commonService, toastr, excelParserService, fb) {\n      this.dialog = dialog;\n      this.cdr = cdr;\n      this.employeeService = employeeService;\n      this.authService = authService;\n      this.commonDbService = commonDbService;\n      this.commonService = commonService;\n      this.toastr = toastr;\n      this.excelParserService = excelParserService;\n      this.fb = fb; // We will get form lables from lcale storage and will put into array.\n\n      this.AppFormLabels = []; // We will filter form header labels array\n\n      this.formHeaderLabels = []; // We will filter form body labels array\n\n      this.formBodyLabels = [];\n      this.file = null;\n      this.sampleFileTypes = [];\n      this.selectedSampleFile = 'Full Employee Data';\n      this.isEdit = false;\n      /*----------------------------------------------------*/\n      //#endregion\n\n      this.importData = new MatTableDataSource([]);\n      this.columnsToDisplay = ['name', 'employeeId', 'periodCode', 'reference', 'previous_Amount', 'amount', 'actions'];\n      this.totalData = [];\n      this.searchTerm = ''; // deptData: Dept[] = [];\n      // jobData: Job[] = [];\n      // contractData: Contract[] = [];\n      // sdpData: SDP[] = [];\n      // monthlyData: MonthlyData[];\n      // comData: ComData[];\n\n      this.displayedColumns = ['Action', 'Exception', 'EmployeeUnivNo', 'EnglishNAme', 'ArabicNAme', 'JoinedDate', 'PFNo', 'SubscribedDate', 'MemStatus', 'AgreedSubmt', 'AmountReceivedTillNow', 'LastSalary', 'TerminationDate', 'Occupation', 'Gender', 'Mobile', 'CivilID', 'Birthday', 'Department', 'ContractType', 'Email', 'EmpPaciNo', 'Nationality', 'NextToKin'];\n      this.countries$ = this.commonDbService.GetCountryList();\n      this.countries$.subscribe(countriesList => {\n        this.countries = countriesList;\n      }, error => {\n        console.error('Error fetching countries:', error);\n      });\n      this.departments$ = this.commonDbService.GetDepartments();\n      this.departments$.subscribe(departments => {\n        this.departments = departments;\n      }, error => {\n        console.error('Error fetching departments', error);\n      });\n      this.contractTypes$ = this.commonDbService.GetContractType();\n      this.contractTypes$.subscribe(contractTypes => {\n        this.contractTypes = contractTypes;\n      }, error => {\n        console.error('Error fetching departments', error);\n      });\n      this.occupations$ = this.commonDbService.GetOccupations();\n      this.occupations$.subscribe(occupations => {\n        this.occupations = occupations;\n      }, error => {\n        console.error('Error fetching departments', error);\n      });\n    }\n\n    ngOnInit() {\n      this.tenantId = JSON.parse(localStorage.getItem('user') || '{}')[0].tenantId;\n      this.locationId = JSON.parse(localStorage.getItem('user') || '{}')[0].locationId;\n      this.userName = JSON.parse(localStorage.getItem('user') || '{}')[0].username;\n      this.userId = JSON.parse(localStorage.getItem('user') || '{}')[0].userId;\n      this.periodCode = JSON.parse(localStorage.getItem('user') || '{}')[0].periodCode;\n      this.formGroup = this.fb.group({\n        searchTerm: ['']\n      });\n      const searchTermControl = this.formGroup.get('searchTerm');\n\n      if (searchTermControl) {\n        searchTermControl.valueChanges.subscribe(term => {\n          this.filterRecords(term);\n        });\n      } //#region TO SETUP THE FORM LOCALIZATION\n      // TO GET THE LANGUAGE ID e.g. 1 = ENGLISH and 2 =  ARABIC\n\n\n      this.commonService.getLang().subscribe(lang => {\n        this.lang = lang;\n      });\n      this.languageType = localStorage.getItem('langType'); // To get the selected language...\n\n      this.language = localStorage.getItem('lang'); // To setup the form id so will will get form labels based on form Id\n\n      this.formId = 'ImportEmployeeMaster'; // Check if LocalStorage is Not NULL\n\n      if (localStorage.getItem('AppLabels') != null) {\n        // Get data from LocalStorage\n        this.AppFormLabels = JSON.parse(localStorage.getItem('AppLabels') || '{}');\n\n        for (let labels of this.AppFormLabels) {\n          if (labels.formID == this.formId && labels.language == this.languageType) {\n            this.formHeaderLabels.push(labels); // this.formBodyLabels.push(labels.formTitleDTLanguage);\n\n            const jsonFormTitleDTLanguage = labels.formTitleDTLanguage.reduce((result, element) => {\n              result[element.labelId] = element;\n              return result;\n            }, {});\n            this.formBodyLabels.push(jsonFormTitleDTLanguage);\n          }\n        }\n\n        console.log(this.formBodyLabels);\n      } //#endregion\n\n\n      this.getImportDataDropdown();\n    }\n\n    editRow(val, id) {\n      this.isEdit = val;\n      this.editedId = id;\n    }\n\n    saveRow(val, id) {\n      this.isEdit = val;\n      this.editedId = id;\n    }\n\n    getImportDataDropdown() {\n      this.employeeService.GetImportDataUploader(this.tenantId).subscribe(res => {\n        this.sampleFileTypes = res;\n        console.log(this.sampleFileTypes);\n      }, e => {\n        this.toastr.error('Something went wrong');\n      });\n    }\n\n    onFileChange(event) {\n      this.totalData = [];\n      this.filteredEmployeeData = new MatTableDataSource();\n      const file = event.target.files[0];\n      this.excelParserService.parseExcelSheet(file, 'EmployeeData').then(data => {\n        const employeeData = data.rows;\n\n        for (let i = 0; i < employeeData.length; i++) {\n          const e = employeeData[i]; // data field\n\n          e.EmploymentDate = XLSX.SSF.format('mm/dd/yyyy', e.EmploymentDate);\n          e.JoinedDate = XLSX.SSF.format('mm/dd/yyyy', e.JoinedDate);\n          e.SubscribedDate = XLSX.SSF.format('mm/dd/yyyy', e.SubscribedDate);\n          e.TerminationDate = XLSX.SSF.format('mm/dd/yyyy', e.TerminationDate);\n          e.Birthday = XLSX.SSF.format('mm/dd/yyyy', e.Birthday); // To convert shortname to refid\n\n          e.Department = getAttr('shortname', e.Department, 'refid', 0, this.departments);\n          e.ContractType = getAttr('shortname', e.ContractType, 'refid', 0, this.contractTypes);\n          e.Occupation = getAttr('shortname', e.Occupation, 'refid', 0, this.occupations);\n          e.Gender = getAttr('name', e.Gender, 'id', 0, GenderArray);\n          e.Nationality = getAttr('counamE1', e.Nationality, 'countryid', 0, this.countries);\n          e.exceptions = this.checkValidate(e);\n          employeeData[i] = e;\n        }\n\n        this.totalData = employeeData;\n        this.filteredEmployeeData = new MatTableDataSource([...this.totalData]);\n        console.log('load excel file ---------->', data);\n      }).catch(error => {\n        this.toastr.error(error.message, 'Error');\n        console.error('Error reading the file:', error);\n      });\n    }\n\n    checkValidate(employee) {\n      const subscribeTime = new Date(employee.SubscribedDate).getTime();\n      const employeeTime = new Date(employee.EmploymentDate).getTime();\n      const terminationTime = new Date(employee.TerminationDate).getTime();\n      const civilIdRegex = /^\\d{16}$/;\n      const mobileRegex = /^\\d{8}$/;\n      const exceptions = [];\n      if (employee.Department == 0) exceptions.push('Department');\n      if (employee.Occupation == 0) exceptions.push('Occupation');\n      if (employee.ContractType == 0) exceptions.push('ContractType');\n      if (employee.Gender == 0) exceptions.push('Gender');\n      if (employee.Nationality == 0) exceptions.push('Nationality');\n      if (subscribeTime < employeeTime) exceptions.push('SubscribeDate');\n      if (terminationTime < employeeTime) exceptions.push('TerminationDate');\n      if (civilIdRegex.test(employee.CivilID)) exceptions.push('CivilID');\n      if (mobileRegex.test(employee.Mobile)) exceptions.push('Mobile');\n      return exceptions;\n    } // files: FileList): void {\n    //   const tempFile = files.item(0) || null;\n    //   if (tempFile && this.isExcelFile(tempFile.name)) {\n    //     this.file = tempFile;\n    //   } else {\n    //     this.toastr.warning('Invalid file type. Only XLSX, XLS, and CSV files are allowed.');\n    //   }\n    // }\n    // isExcelFile(fileName: string): boolean {\n    //   return /\\.(xlsx|xls|csv)$/i.test(fileName);\n    // }\n\n\n    downloadFile() {\n      // Send a GET request to the server to download the file\n      if (this.selectedSampleFile !== '') {\n        this.employeeService.DownloadSampleFile(\"EmployeeDataReq\").subscribe(response => {\n          // Create a URL for the response blob\n          const url = URL.createObjectURL(response); // Create a link element and click it to trigger the download\n\n          const link = document.createElement('a');\n          link.href = url;\n          link.download = this.selectedSampleFile;\n          link.click(); // Release the URL object\n\n          URL.revokeObjectURL(url);\n        });\n      } else {\n        this.toastr.warning('Kindly select Uploader Type, before click on download');\n      }\n    }\n\n    importEmployeeData() {\n      var _a;\n\n      const currentUser = this.authService.currentUserValue;\n\n      if (currentUser && ((_a = this.filteredEmployeeData) === null || _a === void 0 ? void 0 : _a.data.length)) {\n        for (let i = 0; i < this.totalData.length; i++) {\n          if (this.totalData[i].exceptions.length > 0) {\n            this.toastr.warning('There must not be exception rows.', 'warning');\n            return;\n          }\n        }\n\n        const data = {\n          tenantId: this.tenantId,\n          locationId: this.locationId,\n          userName: this.userName,\n          userId: this.userId,\n          employeeData: this.totalData\n        };\n\n        for (let i = 0; i < data.employeeData.length; i++) {\n          const d = data.employeeData[i];\n          d.JobTitle = this.occupationName(d.Occupation);\n          d.NationalityName = this.nationalityName(d.Nationality);\n          d.DepartmentName = this.departmentName(d.Department);\n          d.ContractTypeName = this.contractTypeName(d.ContractType);\n        }\n\n        this.employeeService.ImportEmployeeData(data).subscribe(response => {\n          if (response.result == 0) this.toastr.success(response.message);else this.toastr.error(response.message);\n        }), error => {\n          this.toastr.error('Something went wrong');\n        };\n      } else {\n        this.toastr.warning('Invalid file or user information');\n      }\n    }\n\n    filterRecords(term) {\n      if (!term) {\n        this.filteredEmployeeData = new MatTableDataSource([...this.totalData]);\n      } else {\n        this.filteredEmployeeData = new MatTableDataSource(this.totalData.filter(employee => Object.values(employee).some(val => val === null || val === void 0 ? void 0 : val.toString().toLowerCase().includes(term.toLowerCase()))));\n      }\n    }\n\n    clearFilter() {\n      const searchTermControl = this.formGroup.get('searchTerm');\n\n      if (searchTermControl) {\n        searchTermControl.setValue('');\n      }\n    }\n\n    occupationName(refid) {\n      return getAttr('refid', refid, 'shortname', 'NA', this.occupations);\n    }\n\n    genderName(id) {\n      return getAttr('id', id, 'name', 'NA', GenderArray);\n    }\n\n    contractTypeName(refid) {\n      return getAttr('refid', refid, 'shortname', 'NA', this.contractTypes);\n    }\n\n    departmentName(refid) {\n      return getAttr('refid', refid, 'shortname', 'NA', this.departments);\n    }\n\n    nationalityName(countryid) {\n      return getAttr('countryid', countryid, 'counamE1', 'NA', this.countries);\n    }\n\n    removeEmployee(employee) {\n      if (window.confirm(\"Are you sure to remove this employee?\") == false) return;\n      let index = this.totalData.findIndex(e => e.EmployeeUnivNo == employee.EmployeeUnivNo);\n      if (index >= 0) this.totalData.splice(index, 1);\n      const tableData = this.filteredEmployeeData.data;\n      index = tableData.findIndex(e => e.EmployeeUnivNo === employee.EmployeeUnivNo);\n\n      if (index >= 0) {\n        tableData.splice(index, 1);\n        this.filteredEmployeeData = new MatTableDataSource(tableData);\n      }\n    }\n\n    editEmployee(employee) {\n      const dialogRef = this.dialog.open(EditEmployeeModalComponent, {\n        data: {\n          employee,\n          countries: this.countries,\n          departments: this.departments,\n          contractTypes: this.contractTypes,\n          occupations: this.occupations,\n          onEmployeeUpdated: this.onEmployeeUpdated.bind(this)\n        },\n        width: '900px'\n      });\n    }\n\n    onEmployeeUpdated(updtOne) {\n      updtOne.exceptions = this.checkValidate(updtOne);\n      const tableData = this.filteredEmployeeData.data;\n      let index = tableData.findIndex(e => e.EmployeeUnivNo === updtOne.EmployeeUnivNo);\n\n      if (index >= 0) {\n        tableData[index] = Object.assign({}, updtOne);\n        this.filteredEmployeeData = new MatTableDataSource(tableData);\n      }\n\n      index = this.totalData.findIndex(e => e.EmployeeUnivNo === updtOne.EmployeeUnivNo);\n\n      if (index >= 0) {\n        this.totalData[index] = Object.assign({}, updtOne);\n      }\n    }\n\n  }\n\n  ImportEmployeeMasterComponent.ɵfac = function ImportEmployeeMasterComponent_Factory(t) {\n    return new (t || ImportEmployeeMasterComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.EmployeeService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.DbCommonService), i0.ɵɵdirectiveInject(i5.CommonService), i0.ɵɵdirectiveInject(i6.ToastrService), i0.ɵɵdirectiveInject(i7.ExcelParserService), i0.ɵɵdirectiveInject(i8.FormBuilder));\n  };\n\n  ImportEmployeeMasterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ImportEmployeeMasterComponent,\n    selectors: [[\"app-import-employee-master\"]],\n    viewQuery: function ImportEmployeeMasterComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 37,\n    vars: 9,\n    consts: [[\"type\", \"hidden\", \"name\", \"ImportEmployeeMaster\", \"value\", \"ImportEmployeeMaster\"], [\"ImportEmployeeMaster\", \"\"], [1, \"card\", \"mb-5\", \"mb-xl-10\"], [1, \"card-header\", \"card-header-stretch\", \"pb-0\", \"header_bg\"], [1, \"card-title\"], [\"lang\", \"AR-SA\", 1, \"m-0\", \"text-white\", \"ArFontStyle\"], [\"id\", \"kt_billing_payment_tab_content\", 1, \"card-body\", \"tab-content\"], [\"id\", \"kt_billing_creditcard\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"row\", \"gx-9\", \"gy-6\"], [\"autocomplete\", \"off\"], [1, \"row\", \"mb-4\"], [1, \"col-lg-6\", \"fv-row\"], [1, \"mt-4\"], [\"for\", \"formFile\", \"lang\", \"AR-SA\", 1, \"form-label\", \"ArFontStyle\"], [\"type\", \"file\", \"id\", \"formFile\", \"accept\", \".xls,.xlsx\", 1, \"form-control\", 3, \"change\"], [\"lang\", \"AR-SA\", 1, \"text-danger\", \"ArFontStyle\"], [1, \"row\", \"d-flex\"], [1, \"col-lg-7\"], [\"name\", \"uploaderType\", \"disabled\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-5\", \"d-flex\", \"flex-column\", \"justify-content-center\"], [1, \"text-right\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"fa\", \"fa-download\"], [1, \"text-success\"], [\"class\", \"card-footer d-flex justify-content-end py-6 px-9\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"card mb-5 mb-xl-10\", 4, \"ngIf\"], [3, \"value\"], [1, \"card-footer\", \"d-flex\", \"justify-content-end\", \"py-6\", \"px-9\"], [\"type\", \"button\", \"lang\", \"AR-SA\", 1, \"btn\", \"btn-primary\", \"float-right\", \"ArFontStyle\", \"btn-bg\", 3, \"click\"], [1, \"table-container\"], [3, \"formGroup\"], [\"appearance\", \"fill\", \"floatLabel\", \"never\", 1, \"w-100\"], [\"type\", \"search\", \"matInput\", \"\", \"formControlName\", \"searchTerm\", 1, \"ArFontStyle\"], [\"matPrefix\", \"\", 1, \"material-icons\"], [\"matSuffix\", \"\", 1, \"material-icons\", 3, \"click\"], [\"mat-table\", \"\", \"matSort\", \"\", 1, \"w-100\", 3, \"dataSource\"], [\"matColumnDef\", \"Action\"], [\"mat-header-cell\", \"\", \"class\", \"text-white p-1\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"ArFontStyle p-1\", 4, \"matCellDef\"], [\"matColumnDef\", \"Exception\"], [\"mat-cell\", \"\", \"class\", \"ArFontStyle p-1 w-100px\", 4, \"matCellDef\"], [\"matColumnDef\", \"EmployeeUnivNo\"], [\"mat-header-cell\", \"\", \"class\", \"text-white p-1 text-center\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"ArFontStyle text-center p-1\", 4, \"matCellDef\"], [\"matColumnDef\", \"EnglishNAme\"], [\"mat-header-cell\", \"\", \"class\", \"text-white p-1\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"ArabicNAme\"], [\"matColumnDef\", \"JoinedDate\"], [\"mat-cell\", \"\", \"class\", \"ArFontStyle\", 4, \"matCellDef\"], [\"matColumnDef\", \"PFNo\"], [\"mat-header-cell\", \"\", \"class\", \"text-white\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"ArFontStyle text-center\", 4, \"matCellDef\"], [\"matColumnDef\", \"SubscribedDate\"], [\"matColumnDef\", \"MemStatus\"], [\"matColumnDef\", \"AgreedSubmt\"], [\"matColumnDef\", \"AmountReceivedTillNow\"], [\"matColumnDef\", \"LastSalary\"], [\"matColumnDef\", \"TerminationDate\"], [\"matColumnDef\", \"Occupation\"], [\"matColumnDef\", \"Gender\"], [\"matColumnDef\", \"Mobile\"], [\"matColumnDef\", \"CivilID\"], [\"matColumnDef\", \"Birthday\"], [\"matColumnDef\", \"Department\"], [\"matColumnDef\", \"ContractType\"], [\"matColumnDef\", \"Email\"], [\"matColumnDef\", \"EmpPaciNo\"], [\"matColumnDef\", \"Nationality\"], [\"matColumnDef\", \"NextToKin\"], [\"mat-header-row\", \"\", \"class\", \"importTableHeader\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", 3, \"class\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\", 1, \"text-white\", \"p-1\"], [\"mat-cell\", \"\", 1, \"ArFontStyle\", \"p-1\"], [1, \"d-flex\"], [\"title\", \"Edit\", 1, \"ArFontStyle\", \"cursor-pointer\", 3, \"click\"], [1, \"bi\", \"bi-pencil-square\", \"fs-2\"], [\"title\", \"Remove\", 1, \"ArFontStyle\", \"cursor-pointer\", \"mx-1\", 3, \"click\"], [1, \"bi\", \"bi-trash\", \"fs-2\", \"text-danger\"], [\"mat-cell\", \"\", 1, \"ArFontStyle\", \"p-1\", \"w-100px\"], [3, \"ngIf\"], [\"class\", \"text-danger\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-danger\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 1, \"text-white\", \"p-1\", \"text-center\"], [\"mat-cell\", \"\", 1, \"ArFontStyle\", \"text-center\", \"p-1\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 1, \"text-white\", \"p-1\"], [\"mat-cell\", \"\", 1, \"ArFontStyle\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 1, \"text-white\"], [\"mat-cell\", \"\", 1, \"ArFontStyle\", \"text-center\"], [\"mat-header-row\", \"\", 1, \"importTableHeader\"], [\"mat-row\", \"\"]],\n    template: function ImportEmployeeMasterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"input\", 0, 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h3\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 8)(10, \"form\", 9)(11, \"div\", 10)(12, \"div\", 11)(13, \"div\", 12)(14, \"label\", 13);\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 14);\n        i0.ɵɵlistener(\"change\", function ImportEmployeeMasterComponent_Template_input_change_16_listener($event) {\n          return ctx.onFileChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"span\");\n        i0.ɵɵelement(18, \"small\", 15);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(19, \"div\", 11)(20, \"div\", 12)(21, \"label\", 13);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 16)(24, \"div\", 17)(25, \"ng-select\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function ImportEmployeeMasterComponent_Template_ng_select_ngModelChange_25_listener($event) {\n          return ctx.selectedSampleFile = $event;\n        });\n        i0.ɵɵtemplate(26, ImportEmployeeMasterComponent_ng_option_26_Template, 2, 2, \"ng-option\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"div\", 20)(28, \"span\", 21)(29, \"span\", 22);\n        i0.ɵɵlistener(\"click\", function ImportEmployeeMasterComponent_Template_span_click_29_listener() {\n          return ctx.downloadFile();\n        });\n        i0.ɵɵelement(30, \"i\", 23);\n        i0.ɵɵtext(31);\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelementStart(32, \"div\", 10)(33, \"span\", 24);\n        i0.ɵɵtext(34);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵtemplate(35, ImportEmployeeMasterComponent_div_35_Template, 3, 1, \"div\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(36, ImportEmployeeMasterComponent_div_36_Template, 86, 5, \"div\", 26);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\" \", ctx.lang == \"en\" ? ctx.formBodyLabels[0].hdrImportEmployeeMaster.title : ctx.formBodyLabels[0].hdrImportEmployeeMaster.arabicTitle, \" \");\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate(ctx.lang == \"en\" ? ctx.formBodyLabels[0].lblSelectFile.title : ctx.formBodyLabels[0].lblSelectFile.arabicTitle);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.lang == \"en\" ? ctx.formBodyLabels[0].lblUploaderType.title : ctx.formBodyLabels[0].lblUploaderType.arabicTitle);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedSampleFile);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sampleFileTypes);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.lang == \"en\" ? ctx.formBodyLabels[0].lblDownloadUploaderSample.title : ctx.formBodyLabels[0].lblDownloadUploaderSample.arabicTitle, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" ( \", ctx.lang == \"en\" ? ctx.formBodyLabels[0].lblUploadFullEmployee.title : ctx.formBodyLabels[0].lblUploadFullEmployee.arabicTitle, \" ) \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.formBodyLabels);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.filteredEmployeeData == null ? null : ctx.filteredEmployeeData.data == null ? null : ctx.filteredEmployeeData.data.length) > 0);\n      }\n    },\n    dependencies: [i9.NgForOf, i9.NgIf, i8.ɵNgNoValidate, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.FormGroupDirective, i8.FormControlName, i8.NgModel, i8.NgForm, i10.NgSelectComponent, i10.NgOptionComponent, i11.MatTable, i11.MatHeaderCellDef, i11.MatHeaderRowDef, i11.MatColumnDef, i11.MatCellDef, i11.MatRowDef, i11.MatHeaderCell, i11.MatCell, i11.MatHeaderRow, i11.MatRow, i12.MatSort, i12.MatSortHeader, i13.MatFormField, i13.MatLabel, i13.MatPrefix, i13.MatSuffix, i14.MatInput, i15.MatIcon],\n    styles: [\".ArFontStyle[_ngcontent-%COMP%]{font-family:Cairo}.panel3bgColor[_ngcontent-%COMP%], .importTableHeader[_ngcontent-%COMP%]{background-color:#4f81cb}.header_bg[_ngcontent-%COMP%]{background-color:var(--celtic-blue)}.btn-bg[_ngcontent-%COMP%]{background-color:var(--blueberry)}.highlightRow[_ngcontent-%COMP%]{background-color:#f4d2d2}.isDisabled[_ngcontent-%COMP%]{cursor:not-allowed;pointer-events:none}td.mat-cell[_ngcontent-%COMP%]{padding:2px 5px!important}\"]\n  });\n  return ImportEmployeeMasterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}