{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport * as moment from 'moment';\nimport { environment } from 'src/environments/environment';\nimport { DocumentAttachmentComponent } from '../../_partials/document-attachment/document-attachment.component';\nimport { COMMA, ENTER } from '@angular/cdk/keycodes';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/_services/db-common.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/modules/_services/common.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/modules/_services/communication.service\";\nimport * as i6 from \"@angular/common/http\";\nimport * as i7 from \"ngx-toastr\";\n\nfunction AddIncomingLettersComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function AddIncomingLettersComponent_div_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.saveClick());\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 13);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 15);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const bodyLabel_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.lang == \"en\" ? bodyLabel_r5[0].title : bodyLabel_r5[0].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.lang == \"en\" ? bodyLabel_r5[1].title : bodyLabel_r5[1].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.lang == \"en\" ? bodyLabel_r5[2].title : bodyLabel_r5[2].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.lang == \"en\" ? bodyLabel_r5[3].title : bodyLabel_r5[3].arabicTitle);\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.lang == \"en\" ? ctx_r3.formHeaderLabels[0].headerName : \"\\u0623\\u0636\\u0641 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0626\\u0644 \\u0627\\u0644\\u0648\\u0627\\u0631\\u062F\\u0629\");\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_option_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const lType_r24 = ctx.$implicit;\n    const i_r25 = ctx.index;\n    i0.ɵɵproperty(\"ngValue\", lType_r24.refId);\n    i0.ɵɵattribute(\"selected\", i_r25 > 0 ? \"selected\" : null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", lType_r24.shortName, \" \");\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Letter type is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Document date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_ng_container_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"option\", 47);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const pType_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", pType_r26.refId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", pType_r26.refname1, \" \");\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Receiving party is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Representative type is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Approved by is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Filled type is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_span_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \" Description is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_mat_chip_67_mat_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 50);\n    i0.ɵɵtext(1, \"cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_mat_chip_67_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-chip\", 48);\n    i0.ɵɵlistener(\"removed\", function AddIncomingLettersComponent_ng_template_10_div_0_mat_chip_67_Template_mat_chip_removed_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r30);\n      const fruit_r27 = restoredCtx.$implicit;\n      const ctx_r29 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r29.remove(fruit_r27));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, AddIncomingLettersComponent_ng_template_10_div_0_mat_chip_67_mat_icon_2_Template, 2, 0, \"mat-icon\", 49);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const fruit_r27 = ctx.$implicit;\n    const ctx_r23 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"selectable\", ctx_r23.selectable)(\"removable\", ctx_r23.removable);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", fruit_r27, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r23.removable);\n  }\n}\n\nconst _c0 = function () {\n  return {\n    dateInputFormat: \"DD-MM-YYYY\",\n    containerClass: \"theme-dark-blue\"\n  };\n};\n\nfunction AddIncomingLettersComponent_ng_template_10_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 19)(2, \"div\", 20)(3, \"ngb-panel\")(4, \"form\", 21)(5, \"div\", 4)(6, \"div\", 22)(7, \"label\", 23);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"select\", 24);\n    i0.ɵɵtemplate(10, AddIncomingLettersComponent_ng_template_10_div_0_option_10_Template, 2, 3, \"option\", 25);\n    i0.ɵɵpipe(11, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, AddIncomingLettersComponent_ng_template_10_div_0_span_12_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 22)(14, \"label\", 27);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 28)(17, \"span\", 29);\n    i0.ɵɵelement(18, \"i\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"input\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, AddIncomingLettersComponent_ng_template_10_div_0_span_20_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 4)(22, \"div\", 22)(23, \"label\", 23);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"select\", 32);\n    i0.ɵɵtemplate(26, AddIncomingLettersComponent_ng_template_10_div_0_ng_container_26_Template, 3, 2, \"ng-container\", 33);\n    i0.ɵɵpipe(27, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(28, AddIncomingLettersComponent_ng_template_10_div_0_span_28_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 22)(30, \"label\", 27);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"input\", 34);\n    i0.ɵɵtemplate(33, AddIncomingLettersComponent_ng_template_10_div_0_span_33_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\", 4)(35, \"div\", 22)(36, \"label\", 23);\n    i0.ɵɵtext(37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(38, \"input\", 35);\n    i0.ɵɵtemplate(39, AddIncomingLettersComponent_ng_template_10_div_0_span_39_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"div\", 22)(41, \"label\", 27);\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"div\", 28)(44, \"span\", 29);\n    i0.ɵɵelement(45, \"i\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(46, \"input\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(47, AddIncomingLettersComponent_ng_template_10_div_0_span_47_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(48, \"div\", 4)(49, \"div\", 22)(50, \"label\", 23);\n    i0.ɵɵtext(51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(52, \"ng-select\", 37);\n    i0.ɵɵpipe(53, \"async\");\n    i0.ɵɵtemplate(54, AddIncomingLettersComponent_ng_template_10_div_0_span_54_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"div\", 22)(56, \"label\", 27);\n    i0.ɵɵtext(57);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(58, \"textarea\", 38);\n    i0.ɵɵtemplate(59, AddIncomingLettersComponent_ng_template_10_div_0_span_59_Template, 2, 0, \"span\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(60, \"div\", 4)(61, \"div\", 22)(62, \"label\", 27);\n    i0.ɵɵtext(63);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(64, \"mat-form-field\", 39)(65, \"mat-chip-list\", 40, 41);\n    i0.ɵɵtemplate(67, AddIncomingLettersComponent_ng_template_10_div_0_mat_chip_67_Template, 3, 4, \"mat-chip\", 42);\n    i0.ɵɵelementStart(68, \"input\", 43);\n    i0.ɵɵlistener(\"matChipInputTokenEnd\", function AddIncomingLettersComponent_ng_template_10_div_0_Template_input_matChipInputTokenEnd_68_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r31.add($event));\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(69, \"div\", 22)(70, \"label\", 27);\n    i0.ɵɵtext(71, \" User Document Number \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(72, \"input\", 44);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n\n  if (rf & 2) {\n    const bodyLabel_r10 = ctx.$implicit;\n\n    const _r22 = i0.ɵɵreference(66);\n\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r9.inCommunicationForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[4].title : bodyLabel_r10[4].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(11, 28, ctx_r9.letterType$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.letterType.errors == null ? null : ctx_r9.inCommunicationFrm.letterType.errors.required));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[5].title : bodyLabel_r10[5].arabicTitle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"bsConfig\", i0.ɵɵpureFunction0(34, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.receivedSentDate.errors == null ? null : ctx_r9.inCommunicationFrm.receivedSentDate.errors.required));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r9.lang === \"en\" ? bodyLabel_r10[6].title : bodyLabel_r10[6].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(27, 30, ctx_r9.partyType$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.senderReceiverParty.errors == null ? null : ctx_r9.inCommunicationFrm.senderReceiverParty.errors.required));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[7].title : bodyLabel_r10[7].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.representative.errors == null ? null : ctx_r9.inCommunicationFrm.representative.errors.required));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[8].title : bodyLabel_r10[8].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.approvedBy.errors == null ? null : ctx_r9.inCommunicationFrm.approvedBy.errors.required));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[9].title : bodyLabel_r10[9].arabicTitle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"bsConfig\", i0.ɵɵpureFunction0(35, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.letterDated.errors == null ? null : ctx_r9.inCommunicationFrm.letterDated.errors.required));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[10].title : bodyLabel_r10[10].arabicTitle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"items\", i0.ɵɵpipeBind1(53, 32, ctx_r9.filledAt$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.filledAt.errors == null ? null : ctx_r9.inCommunicationFrm.filledAt.errors.required));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[11].title : bodyLabel_r10[11].arabicTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isFormSubmitted && (ctx_r9.inCommunicationFrm.description.errors == null ? null : ctx_r9.inCommunicationFrm.description.errors.required));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? bodyLabel_r10[12].title : bodyLabel_r10[12].arabicTitle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.metaTag);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formControl\", ctx_r9.searchTag)(\"matChipInputFor\", _r22)(\"matChipInputSeparatorKeyCodes\", ctx_r9.separatorKeysCodes)(\"matChipInputAddOnBlur\", ctx_r9.addOnBlur);\n  }\n}\n\nfunction AddIncomingLettersComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddIncomingLettersComponent_ng_template_10_div_0_Template, 73, 36, \"div\", 17);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.formBodyLabels);\n  }\n}\n\nexport let AddIncomingLettersComponent = /*#__PURE__*/(() => {\n  class AddIncomingLettersComponent {\n    constructor(commonDbService, fb, commonService, activatedRoute, _communicationService, http, toastr) {\n      this.commonDbService = commonDbService;\n      this.fb = fb;\n      this.commonService = commonService;\n      this.activatedRoute = activatedRoute;\n      this._communicationService = _communicationService;\n      this.http = http;\n      this.toastr = toastr;\n      this.visible = true;\n      this.selectable = true;\n      this.removable = true;\n      this.addOnBlur = true;\n      this.separatorKeysCodes = [ENTER, COMMA];\n      this.fruitCtrl = new FormControl();\n      this.metaTag = [];\n      this.allFruits = ['Apple', 'Lemon', 'Lime', 'Orange', 'Strawberry'];\n      this.name = 'Tags input';\n      this.tagsInput = [];\n      this.limit = 5;\n      this.header = 'Tags input';\n      this.placeholder = 'Enter tags';\n      this.mode = 'success';\n      this.text = `\"<label for=\\\"headerText\\\">{{ header }}</label>\\n<input\\n  type=\\\"text\\\"\\n  class=\\\"input-tags\\\"\\n  (change)=\\\"add($event)\\\"\\n  [style.borderColor]=\\\"mode\\\"\\n  [placeholder]=\\\"placeholder\\\"\\n/>\\n<label for=\\\"\\\">Maximum tags allowed {{ limit }} </label>\\n<div class=\\\"righter\\\">\\n  <span\\n    class=\\\"labeler\\\" (click)=\\\"remove(i)\\\"\\n    [style.backgroundColor]=\\\"mode\\\"\\n    *ngFor=\\\"let item of tags; index as i\\\"\\n  >\\n    {{ item }}&nbsp;&times;\\n  </span>\\n</div>\\n\",`;\n      this.isFormSubmitted = false;\n      this.baseUrl = environment.KUPFApiUrl;\n      this.selectedLetterType = \"0\"; // We will get form lables from lcale storage and will put into array.\n\n      this.AppFormLabels = []; // We will filter form header labels array\n\n      this.formHeaderLabels = []; // We will filter form body labels array\n\n      this.formBodyLabels = [];\n      this.lType = 0;\n      this.selectedItem = null;\n      this.items = ['test'];\n      this.tagSuggestions = ['google', 'apple', 'microsoft'];\n      this.selectedOption = '0';\n      this.transId = this.activatedRoute.snapshot.paramMap.get('mytransid');\n    }\n\n    add(event) {\n      const input = event.input;\n      const value = event.value; // Add our fruit\n\n      if ((value || '').trim()) {\n        this.metaTag.push(value.trim());\n      } // Reset the input value\n\n\n      if (input) {\n        input.value = '';\n      }\n    }\n\n    remove(fruit) {\n      const index = this.metaTag.indexOf(fruit);\n\n      if (index >= 0) {\n        this.metaTag.splice(index, 1);\n      }\n    }\n\n    displayTags(tag) {\n      this.tagsInput = tag;\n    }\n\n    ngOnInit() {\n      this.selectedOption = '1';\n      this.commonService.getLang().subscribe(lang => {\n        this.lang = lang;\n      });\n      this.selectedLetterType = '0'; // Add this line\n\n      console.log('Selected Letter Type:', this.selectedLetterType); //#region TO SETUP THE FORM LOCALIZATION    \n      // TO GET THE LANGUAGE ID e.g. 1 = ENGLISH and 2 =  ARABIC\n\n      this.languageType = localStorage.getItem('langType'); // To get the selected language...\n\n      this.language = localStorage.getItem('lang'); // To setup the form id so will will get form labels based on form Id\n\n      this.formId = 'AddIncomingLetters'; // Check if LocalStorage is Not NULL\n\n      if (localStorage.getItem('AppLabels') != null) {\n        // Get data from LocalStorage\n        this.AppFormLabels = JSON.parse(localStorage.getItem('AppLabels') || '{}');\n\n        for (let labels of this.AppFormLabels) {\n          if (labels.formID == this.formId && labels.language == this.languageType) {\n            this.formHeaderLabels.push(labels);\n            this.formBodyLabels.push(labels.formTitleDTLanguage);\n          }\n        }\n\n        console.log(this.formHeaderLabels);\n      } //#endregion\n\n\n      this.initializeCommunicationDeliveryForm();\n      this.letterType$ = this.commonDbService.getLetterType(); //  this.fg=new FormGroup({\n      //     lType:new FormControl(this.lType)\n      //   });\n\n      this.partyType$ = this.commonDbService.getPartyType();\n      this.filledAt$ = this.commonDbService.getFilledAtAsync(); //\n\n      this.users$ = this.commonDbService.GetUsers(); //\n\n      this.selectDocTypeDto$ = this.commonDbService.GetDocTypes(21);\n\n      if (this.transId) {\n        this._communicationService.GetIncomingLetter(this.transId).subscribe(response => {\n          this.metaTag = response.searchTag.split(',');\n          this.inCommunicationForm.patchValue({\n            letterType: response.letterType,\n            receivedSentDate: response.receivedSentDate ? moment(response.receivedSentDate).format(\"DD-MM-yyyy\") : new Date(),\n            senderReceiverParty: response.senderReceiverParty,\n            representative: response.representative,\n            employeeId: response.employeeId,\n            letterDated: response.letterDated ? moment(response.letterDated).format(\"DD-MM-yyyy\") : new Date(),\n            filledAt: response.filledAt,\n            description: response.description,\n            searchTag: response.searchTag,\n            mytransid: response.mytransid,\n            userDocumentNo: response.userDocumentNo,\n            approvedBy: response.approvedBy\n          }); // \n\n          this.documentattachmentcomponent.setValueofDocForm(response);\n        }, error => {\n          console.log(error);\n        });\n      }\n    }\n\n    initializeCommunicationDeliveryForm() {\n      this.inCommunicationForm = this.fb.group({\n        tenentId: new FormControl('0'),\n        locationId: new FormControl('0'),\n        username: new FormControl(''),\n        userId: new FormControl('0'),\n        //letterType: new FormControl([0], Validators.required),\n        letterType: [1, Validators.required],\n        receivedSentDate: new FormControl(moment().format('DD-MM-YYYY'), Validators.required),\n        // senderReceiverParty: new FormControl('', Validators.required),\n        senderReceiverParty: [1, Validators.required],\n        representative: new FormControl('', Validators.required),\n        // employeeId: new FormControl('', Validators.required),\n        letterDated: new FormControl(moment().format('DD-MM-YYYY'), Validators.required),\n        filledAt: new FormControl('', Validators.required),\n        description: new FormControl('', Validators.required),\n        searchTag: new FormControl(''),\n        approvedBy: new FormControl('', Validators.required),\n        mytransid: new FormControl(0),\n        userDocumentNo: new FormControl('', Validators.required),\n        lType: [this.lType]\n      });\n    }\n\n    saveClick() {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n\n      console.log(this.metaTag.join(','));\n      console.log(this.inCommunicationFrm);\n      console.log('save hit'); // Get data from local storage\n\n      var data = JSON.parse(localStorage.getItem(\"user\"));\n      const tenantId = data.map(obj => obj.tenantId);\n      const locationId = data.map(obj => obj.locationId);\n      const userId = data.map(obj => obj.userId);\n      const username = data.map(obj => obj.username);\n      this.inCommunicationForm.patchValue({\n        tenentId: tenantId[0],\n        locationId: locationId[0],\n        username: username[0],\n        userId: userId[0]\n      });\n      this.documentattachmentcomponent.formVal();\n      {\n        console.log('test');\n        this.isFormSubmitted = true;\n        let formData = Object.assign(Object.assign({}, this.inCommunicationForm.value), this.documentattachmentcomponent.formVal);\n        formData['searchTag'] = this.metaTag.join(',');\n        formData['letterDated'] = moment(formData['letterDated']).format(\"yyyy-MM-DD\");\n        formData['receivedSentDate'] = moment(formData['receivedSentDate']).format(\"yyyy-MM-DD\");\n        formData['subject'] = (_a = this.documentattachmentcomponent.getForm.get('subject')) === null || _a === void 0 ? void 0 : _a.value;\n        formData['remarks'] = (_b = this.documentattachmentcomponent.getForm.get('attachmentRemarks')) === null || _b === void 0 ? void 0 : _b.value;\n        formData['metaTags'] = (_c = this.documentattachmentcomponent.getForm.get('mtag')) === null || _c === void 0 ? void 0 : _c.value;\n        formData['appplicationFileDocType'] = (_d = this.documentattachmentcomponent.getForm.get('appplicationFileDocType')) === null || _d === void 0 ? void 0 : _d.value;\n        formData['appplicationFileDocument'] = (_e = this.documentattachmentcomponent.getForm.get('appplicationFileDocument')) === null || _e === void 0 ? void 0 : _e.value;\n        formData['civilIdDocType'] = (_f = this.documentattachmentcomponent.getForm.get('civilIdDocType')) === null || _f === void 0 ? void 0 : _f.value;\n        formData['civilIdDocument'] = (_g = this.documentattachmentcomponent.getForm.get('civilIdDocument')) === null || _g === void 0 ? void 0 : _g.value;\n        formData['workIdDocType'] = (_h = this.documentattachmentcomponent.getForm.get('workIdDocType')) === null || _h === void 0 ? void 0 : _h.value;\n        formData['workIdDocument'] = (_j = this.documentattachmentcomponent.getForm.get('workIdDocument')) === null || _j === void 0 ? void 0 : _j.value;\n        formData['personalPhotoDocType'] = (_k = this.documentattachmentcomponent.getForm.get('personalPhotoDocType')) === null || _k === void 0 ? void 0 : _k.value;\n        formData['personalPhotoDocument'] = (_l = this.documentattachmentcomponent.getForm.get('personalPhotoDocument')) === null || _l === void 0 ? void 0 : _l.value;\n        formData['salaryDataDocType'] = (_m = this.documentattachmentcomponent.getForm.get('salaryDataDocType')) === null || _m === void 0 ? void 0 : _m.value;\n        formData['salaryDataDocument'] = (_o = this.documentattachmentcomponent.getForm.get('salaryDataDocument')) === null || _o === void 0 ? void 0 : _o.value;\n        console.log(formData);\n        console.log('Befor Insert and Update'); //\n\n        if (this.transId) {\n          formData['appplicationFileDocument'] = this.documentattachmentcomponent.file0;\n          formData['civilIdDocument'] = this.documentattachmentcomponent.file1;\n          formData['workIdDocument'] = this.documentattachmentcomponent.file2;\n          formData['personalPhotoDocument'] = this.documentattachmentcomponent.file3;\n          formData['salaryDataDocument'] = this.documentattachmentcomponent.file4;\n        }\n\n        let finalformData = new FormData();\n        Object.keys(formData).forEach(key => finalformData.append(key, formData[key]));\n        console.log(finalformData);\n        console.log(this.inCommunicationForm);\n\n        if (this.inCommunicationForm.valid) {\n          if (this.transId) {\n            console.log(finalformData);\n            console.log('Edit', formData);\n\n            this._communicationService.UpdateIncomingLetter(finalformData).subscribe(response => {\n              if (response === 1) {\n                this.toastr.success(\"Saved Successfully\", \"Success\");\n                this.inCommunicationForm.reset();\n              } else {\n                this.toastr.error(\"Something went wrong\", \"Error\");\n              }\n            }, error => {\n              console.log(error);\n            });\n          } else {\n            console.log('Add', formData);\n\n            this._communicationService.AddIncomingLetter(finalformData).subscribe(response => {\n              if (response === 1) {\n                this.toastr.success(\"Saved Successfully\", \"Success\");\n                this.inCommunicationForm.reset();\n              } else {\n                this.toastr.error(\"Something went wrong\", \"Error\");\n              }\n            }, error => {\n              console.log(error);\n            });\n          }\n        }\n      } // this.saveDoc();\n    }\n\n    saveDoc() {\n      this.documentattachmentcomponent.formVal();\n    } // To access form controls...\n\n\n    get inCommunicationFrm() {\n      return this.inCommunicationForm.controls;\n    }\n\n  }\n\n  AddIncomingLettersComponent.ɵfac = function AddIncomingLettersComponent_Factory(t) {\n    return new (t || AddIncomingLettersComponent)(i0.ɵɵdirectiveInject(i1.DbCommonService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.CommonService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i5.CommunicationService), i0.ɵɵdirectiveInject(i6.HttpClient), i0.ɵɵdirectiveInject(i7.ToastrService));\n  };\n\n  AddIncomingLettersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddIncomingLettersComponent,\n    selectors: [[\"app-add-incoming-letters\"]],\n    viewQuery: function AddIncomingLettersComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(DocumentAttachmentComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.documentattachmentcomponent = _t.first);\n      }\n    },\n    decls: 13,\n    vars: 1,\n    consts: [[\"type\", \"hidden\", \"name\", \"AddIncomingLetters\", \"value\", \"AddIncomingLetters\"], [\"AddIncomingLetters\", \"\"], [1, \"notice\", \"d-flex\", \"bg-light-primary\", \"rounded\", \"border-primary\", \"border\", \"border-dashed\", \"p-6\", \"mb-3\"], [1, \"d-flex\", \"flex-stack\", \"flex-grow-1\", \"flex-wrap\", \"flex-md-nowrap\"], [1, \"row\"], [\"class\", \"btn-group\", \"role\", \"group\", \"aria-label\", \"Basic example\", 4, \"ngFor\", \"ngForOf\"], [\"activeIds\", \"ngb-panel-0\", 1, \"mb-2\"], [\"acc\", \"ngbAccordion\"], [\"id\", \"ngb-panel-0\"], [\"ngbPanelTitle\", \"\"], [\"ngbPanelContent\", \"\"], [\"role\", \"group\", \"aria-label\", \"Basic example\", 1, \"btn-group\"], [\"type\", \"button\", \"lang\", \"AR-SA\", 1, \"btn\", \"btn-primary\", \"ArFontStyle\", \"fluro_btn_shade_i1\", 3, \"click\"], [\"type\", \"button\", \"routerLink\", \"/communication/incoming-letter-details\", \"lang\", \"AR-SA\", 1, \"btn\", \"btn-primary\", \"ArFontStyle\", \"fluro_btn_shade_i2\"], [\"type\", \"button\", \"lang\", \"AR-SA\", \"routerLink\", \"/communication/incoming-letter-details\", \"routerLinkActive\", \"active\", 1, \"btn\", \"btn-primary\", \"ArFontStyle\", \"fluro_btn_shade_i3\"], [\"type\", \"button\", \"lang\", \"AR-SA\", 1, \"btn\", \"btn-primary\", \"ArFontStyle\", \"fluro_btn_shade_i4\"], [\"lang\", \"AR-SA\", \"id\", \"DocumentAttachments\", 1, \"m-0\", \"ArFontStyle\"], [\"id\", \"kt_billing_payment_tab_content\", \"class\", \"card-body tab-content\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"kt_billing_payment_tab_content\", 1, \"card-body\", \"tab-content\"], [\"id\", \"kt_billing_creditcard\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"row\", \"gx-9\", \"gy-6\"], [\"autocomplete\", \"off\", 3, \"formGroup\"], [1, \"col-lg-6\", \"fv-row\"], [\"lang\", \"AR-SA\", 1, \"col-form-label\", \"fw-bold\", \"fs-6\", \"ArFontStyle\"], [\"formControlName\", \"letterType\", \"disabled\", \"\", 1, \"form-control\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"lang\", \"AR-SA\", 1, \"col-lg-4\", \"col-form-label\", \"fw-bold\", \"fs-6\", \"ArFontStyle\"], [1, \"input-group\"], [\"id\", \"basic-addon1\", 1, \"input-group-text\"], [1, \"fas\", \"fa-calendar\"], [\"type\", \"text\", \"bsDatepicker\", \"\", \"formControlName\", \"receivedSentDate\", \"lang\", \"AR-SA\", 1, \"form-control\", 3, \"bsConfig\"], [\"formControlName\", \"senderReceiverParty\", 1, \"form-control\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"formControlName\", \"representative\", 1, \"form-control\", \"form-control-lg\", \"mb-3\", \"mb-lg-0\"], [\"type\", \"text\", \"formControlName\", \"approvedBy\", \"lang\", \"AR-SA\", 1, \"form-control\"], [\"type\", \"text\", \"bsDatepicker\", \"\", \"formControlName\", \"letterDated\", \"lang\", \"AR-SA\", 1, \"form-control\", 3, \"bsConfig\"], [\"bindLabel\", \"shortName\", \"bindValue\", \"refId\", \"lang\", \"AR-SA\", \"formControlName\", \"filledAt\", 3, \"items\"], [\"formControlName\", \"description\", 1, \"form-control\", \"form-control-lg\", \"mb-3\", \"mb-lg-0\"], [\"appearance\", \"outline\", 1, \"example-chip-list\", 2, \"width\", \"100%\"], [\"aria-label\", \"Fruit selection\"], [\"chipList\", \"\"], [3, \"selectable\", \"removable\", \"removed\", 4, \"ngFor\", \"ngForOf\"], [3, \"formControl\", \"matChipInputFor\", \"matChipInputSeparatorKeyCodes\", \"matChipInputAddOnBlur\", \"matChipInputTokenEnd\"], [\"type\", \"text\", \"formControlName\", \"userDocumentNo\", 1, \"form-control\", \"form-control-lg\", \"mb-3\", \"mb-lg-0\"], [3, \"ngValue\"], [1, \"text-danger\"], [3, \"value\"], [3, \"selectable\", \"removable\", \"removed\"], [\"matChipRemove\", \"\", 4, \"ngIf\"], [\"matChipRemove\", \"\"]],\n    template: function AddIncomingLettersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"input\", 0, 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵtemplate(5, AddIncomingLettersComponent_div_5_Template, 9, 4, \"div\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ngb-accordion\", 6, 7)(8, \"ngb-panel\", 8);\n        i0.ɵɵtemplate(9, AddIncomingLettersComponent_ng_template_9_Template, 2, 1, \"ng-template\", 9);\n        i0.ɵɵtemplate(10, AddIncomingLettersComponent_ng_template_10_Template, 1, 1, \"ng-template\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(11, \"br\")(12, \"app-document-attachment\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.formBodyLabels);\n      }\n    },\n    styles: [\".panel1bgColor[_ngcontent-%COMP%]{background-color:#4fcbc8}.ArFontStyle[_ngcontent-%COMP%]{font-family:Cairo}.btn-group[_ngcontent-%COMP%]{column-gap:20px}.fluro_btn_shade_i1[_ngcontent-%COMP%]{background-color:var(--fluro_btn_shade_i1);color:#fff}.fluro_btn_shade_i2[_ngcontent-%COMP%]{background-color:var(--fluro_btn_shade_i2);color:#fff}.fluro_btn_shade_i3[_ngcontent-%COMP%]{background-color:var(--fluro_btn_shade_i3);color:#fff}.fluro_btn_shade_i4[_ngcontent-%COMP%]{background-color:var(--fluro_btn_shade_i4);color:#fff}.fluro_btn_shade_i1.btn.btn-primary[_ngcontent-%COMP%]:hover, .fluro_btn_shade_i1.btn.btn-primary[_ngcontent-%COMP%]:focus, .fluro_btn_shade_i1.btn.btn-primary[_ngcontent-%COMP%]:active, .fluro_btn_shade_i2.btn.btn-primary[_ngcontent-%COMP%]:hover, .fluro_btn_shade_i2.btn.btn-primary[_ngcontent-%COMP%]:focus, .fluro_btn_shade_i2.btn.btn-primary[_ngcontent-%COMP%]:active, .fluro_btn_shade_i3.btn.btn-primary[_ngcontent-%COMP%]:hover, .fluro_btn_shade_i3.btn.btn-primary[_ngcontent-%COMP%]:focus, .fluro_btn_shade_i3.btn.btn-primary[_ngcontent-%COMP%]:active, .fluro_btn_shade_i4.btn.btn-primary[_ngcontent-%COMP%]:hover, .fluro_btn_shade_i4.btn.btn-primary[_ngcontent-%COMP%]:focus, .fluro_btn_shade_i4.btn.btn-primary[_ngcontent-%COMP%]:active{background-color:#2b9b97!important}\"]\n  });\n  return AddIncomingLettersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}