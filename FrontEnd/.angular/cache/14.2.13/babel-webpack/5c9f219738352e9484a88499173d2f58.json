{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/_services/localization.service\";\nimport * as i2 from \"src/app/modules/_services/common.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/cdk/bidi\";\nimport * as i8 from \"@angular/material/table\";\nimport * as i9 from \"@angular/material/paginator\";\nimport * as i10 from \"@angular/material/sort\";\nimport * as i11 from \"@angular/material/form-field\";\nimport * as i12 from \"@angular/material/input\";\nimport * as i13 from \"@angular/material/icon\";\n\nfunction ManageFormLabelsComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.lang == \"en\" ? ctx_r0.formBodyLabels[0].FormId.title : ctx_r0.formBodyLabels[0].FormId.arabicTitle);\n  }\n}\n\nfunction ManageFormLabelsComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r12.formID);\n  }\n}\n\nfunction ManageFormLabelsComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.lang == \"en\" ? ctx_r2.formBodyLabels[0].FormName.title : ctx_r2.formBodyLabels[0].FormName.arabicTitle);\n  }\n}\n\nfunction ManageFormLabelsComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r13.formName);\n  }\n}\n\nfunction ManageFormLabelsComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.lang == \"en\" ? ctx_r4.formBodyLabels[0].HeaderNameEn.title : ctx_r4.formBodyLabels[0].HeaderNameEn.arabicTitle);\n  }\n}\n\nfunction ManageFormLabelsComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r14.headerName);\n  }\n}\n\nfunction ManageFormLabelsComponent_th_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r6.lang == \"en\" ? ctx_r6.formBodyLabels[0].SubHeaderEn.title : ctx_r6.formBodyLabels[0].SubHeaderEn.arabicTitle);\n  }\n}\n\nfunction ManageFormLabelsComponent_td_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r15.subHeaderName);\n  }\n}\n\nfunction ManageFormLabelsComponent_th_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r8.lang == \"en\" ? ctx_r8.formBodyLabels[0].Action.title : ctx_r8.formBodyLabels[0].Action.arabicTitle);\n  }\n}\n\nfunction ManageFormLabelsComponent_td_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 30)(1, \"button\", 31);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r16 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/references/update-labels/\", item_r16.formID, \"\");\n    i0.ɵɵpropertyInterpolate(\"id\", item_r16.formID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r9.lang == \"en\" ? ctx_r9.formBodyLabels[0].Select.title : ctx_r9.formBodyLabels[0].Select.arabicTitle);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"hidden\": a0\n  };\n};\n\nfunction ManageFormLabelsComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 32);\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, !ctx_r10.isLoadingCompleted));\n  }\n}\n\nfunction ManageFormLabelsComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 33);\n  }\n}\n\nconst _c1 = function () {\n  return [0, 20, 30];\n};\n\nexport let ManageFormLabelsComponent = /*#__PURE__*/(() => {\n  class ManageFormLabelsComponent {\n    constructor(localizationService, commonService) {\n      this.localizationService = localizationService;\n      this.commonService = commonService;\n      /* Material Table Configuration */\n      //#region\n      // To display table column headers\n\n      this.columnsToDisplay = ['action', 'formID', 'formName', 'headerNameEn', 'subHeaderNameEn']; // We need a normal array of data so we will subscribe to the observable and will get data\n\n      this.formTitleHd = new MatTableDataSource([]); // Hide footer while loading.\n\n      this.isLoadingCompleted = false; //\n\n      this.currentPage = 0;\n      this.totalRows = 0;\n      this.pageSizeOptions = [10, 20, 50, 100];\n      this.formLabelHeaders = {}; // Incase of any error will display error message.\n\n      this.dataLoadingStatus = ''; // True of any error\n\n      this.isError = false; // Search Term\n\n      this.searchTerm = ''; //#endregion\n\n      this.direction = ''; // We will get form lables from lcale storage and will put into array.\n\n      this.AppFormLabels = []; // We will filter form header labels array\n\n      this.formHeaderLabels = []; // We will filter form body labels array\n\n      this.formBodyLabels = [];\n      this.formGroup = new FormGroup({\n        searchTerm: new FormControl(\"\")\n      });\n      this.userParams = this.localizationService.getUserParams();\n    }\n\n    ngOnInit() {\n      //#region    \n      if (localStorage.getItem('lang') == 'ar') {\n        this.direction = 'rtl';\n      }\n\n      if (localStorage.getItem('lang') == 'en') {\n        this.direction = 'ltr';\n      }\n\n      this.loadData(0);\n      this.commonService.getLang().subscribe(lang => {\n        this.lang = lang;\n      }); //#region TO SETUP THE FORM LOCALIZATION    \n      // TO GET THE LANGUAGE ID e.g. 1 = ENGLISH and 2 =  ARABIC\n\n      this.languageType = localStorage.getItem('langType'); // To get the selected language...\n\n      this.language = localStorage.getItem('lang'); // To setup the form id so will will get form labels based on form Id\n\n      this.formId = 'SetupManageFormLabels'; // Check if LocalStorage is Not NULL\n\n      if (localStorage.getItem('AppLabels') != null) {\n        // Get data from LocalStorage\n        this.AppFormLabels = JSON.parse(localStorage.getItem('AppLabels') || '{}');\n\n        for (let labels of this.AppFormLabels) {\n          if (labels.formID == this.formId) {\n            this.formHeaderLabels.push(labels);\n            const jsonFormTitleDTLanguage = labels.formTitleDTLanguage.reduce((result, element) => {\n              result[element.labelId] = element;\n              return result;\n            }, {});\n            this.formBodyLabels.push(jsonFormTitleDTLanguage);\n          }\n        }\n      }\n\n      console.log(this.formBodyLabels);\n    }\n\n    loadData(pageIndex) {\n      this.userParams.pageNumber = pageIndex + 1;\n      this.localizationService.setUserParams(this.userParams);\n      this.localizationService.getAllFormHeaderLabels(this.userParams, this.formGroup.value.searchTerm).subscribe(response => {\n        this.formLabelHeaders.totalItems = response.totalRecords;\n        this.formTitleHd = new MatTableDataSource(response.formTitleHDLanguageDto);\n        this.formTitleHd.paginator = this.paginator;\n        this.formTitleHd.sort = this.sort;\n        this.isLoadingCompleted = true;\n        setTimeout(() => {\n          this.paginator.length = this.formLabelHeaders.totalItems;\n          this.paginator.pageIndex = pageIndex;\n        });\n      }, error => {\n        console.log(error);\n        this.dataLoadingStatus = 'Error fetching the data';\n        this.isError = true;\n      });\n    } //#region Material Search and Clear Filter\n\n\n    filterRecords(pageIndex = -1) {\n      if (this.formGroup.value.searchTerm != null && this.formTitleHd) {\n        this.formGroup.value.searchTerm = this.formTitleHd.filter = this.formGroup.value.searchTerm.trim();\n      }\n\n      if (pageIndex == 0) this.loadData(0);else this.loadData(this.paginator.pageIndex);\n    }\n\n    clearFilter() {\n      var _a;\n\n      (_a = this.formGroup) === null || _a === void 0 ? void 0 : _a.patchValue({\n        searchTerm: \"\"\n      });\n      this.filterRecords();\n    } //#endregion\n\n\n    pageChanged(event) {\n      if (event.pageIndex == 0) {\n        this.userParams.pageNumber = event.pageIndex + 1;\n      } else if (event.length <= event.pageIndex * event.pageSize + event.pageSize) {\n        this.userParams.pageNumber = event.pageIndex + 1;\n      } else if (event.previousPageIndex > event.pageIndex) {\n        this.userParams.pageNumber = event.pageIndex;\n      } else {\n        this.userParams.pageNumber = event.pageIndex + 1;\n      }\n\n      this.userParams.pageSize = event.pageSize;\n      this.localizationService.setUserParams(this.userParams);\n\n      if (this.formGroup.value.searchTerm == null) {\n        this.loadData(event.pageIndex);\n      } else if (this.formGroup.value.searchTerm.length > 0) {\n        this.filterRecords();\n      } else {\n        this.loadData(event.pageIndex);\n      }\n    }\n\n  }\n\n  ManageFormLabelsComponent.ɵfac = function ManageFormLabelsComponent_Factory(t) {\n    return new (t || ManageFormLabelsComponent)(i0.ɵɵdirectiveInject(i1.LocalizationService), i0.ɵɵdirectiveInject(i2.CommonService));\n  };\n\n  ManageFormLabelsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ManageFormLabelsComponent,\n    selectors: [[\"app-manage-form-labels\"]],\n    viewQuery: function ManageFormLabelsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 38,\n    vars: 14,\n    consts: [[1, \"card\", \"mb-5\", \"mb-xl-10\"], [1, \"card-header\", \"card-header-stretch\", \"pb-0\", \"panel1bgColor\"], [1, \"card-title\"], [\"lang\", \"AR-SA\", 1, \"m-0\", \"text-white\", \"ArFontStyle\", \"header_color\"], [\"id\", \"kt_billing_payment_tab_content\", 1, \"card-body\", \"tab-content\"], [\"id\", \"kt_billing_creditcard\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"row\", \"gx-9\", \"gy-6\"], [3, \"formGroup\"], [\"appearance\", \"fill\", \"floatLabel\", \"never\", 1, \"w-100\"], [\"type\", \"search\", \"matInput\", \"\", \"formControlName\", \"searchTerm\", 1, \"ArFontStyle\", 3, \"keyup.enter\"], [\"matPrefix\", \"\", 1, \"material-icons\"], [\"matSuffix\", \"\", 1, \"material-icons\", 3, \"click\"], [1, \"table-container\"], [\"mat-table\", \"\", \"matSort\", \"\", 1, \"w-100\", 3, \"dataSource\", \"dir\"], [\"matColumnDef\", \"formID\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"w-25 ArFontStyle\", 4, \"matCellDef\"], [\"matColumnDef\", \"formName\"], [\"matColumnDef\", \"headerNameEn\"], [\"matColumnDef\", \"subHeaderNameEn\"], [\"matColumnDef\", \"action\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", \"class\", \"table_header_bg\", 3, \"ngClass\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [3, \"ngClass\"], [\"showFirstLastButtons\", \"\", 3, \"pageSize\", \"pageSizeOptions\", \"page\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", 1, \"w-25\", \"ArFontStyle\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 3, \"routerLink\", \"id\"], [\"mat-header-row\", \"\", 1, \"table_header_bg\", 3, \"ngClass\"], [\"mat-row\", \"\"]],\n    template: function ManageFormLabelsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h3\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"form\", 7)(9, \"mat-form-field\", 8)(10, \"mat-label\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"input\", 9);\n        i0.ɵɵlistener(\"keyup.enter\", function ManageFormLabelsComponent_Template_input_keyup_enter_12_listener() {\n          return ctx.filterRecords(0);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-icon\", 10);\n        i0.ɵɵtext(14, \"search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"mat-icon\", 11);\n        i0.ɵɵlistener(\"click\", function ManageFormLabelsComponent_Template_mat_icon_click_15_listener() {\n          return ctx.clearFilter();\n        });\n        i0.ɵɵtext(16, \"close\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"div\", 12)(18, \"table\", 13);\n        i0.ɵɵelementContainerStart(19, 14);\n        i0.ɵɵtemplate(20, ManageFormLabelsComponent_th_20_Template, 2, 1, \"th\", 15);\n        i0.ɵɵtemplate(21, ManageFormLabelsComponent_td_21_Template, 2, 1, \"td\", 16);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(22, 17);\n        i0.ɵɵtemplate(23, ManageFormLabelsComponent_th_23_Template, 2, 1, \"th\", 15);\n        i0.ɵɵtemplate(24, ManageFormLabelsComponent_td_24_Template, 2, 1, \"td\", 16);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(25, 18);\n        i0.ɵɵtemplate(26, ManageFormLabelsComponent_th_26_Template, 2, 1, \"th\", 15);\n        i0.ɵɵtemplate(27, ManageFormLabelsComponent_td_27_Template, 2, 1, \"td\", 16);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(28, 19);\n        i0.ɵɵtemplate(29, ManageFormLabelsComponent_th_29_Template, 2, 1, \"th\", 15);\n        i0.ɵɵtemplate(30, ManageFormLabelsComponent_td_30_Template, 2, 1, \"td\", 16);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(31, 20);\n        i0.ɵɵtemplate(32, ManageFormLabelsComponent_th_32_Template, 2, 1, \"th\", 21);\n        i0.ɵɵtemplate(33, ManageFormLabelsComponent_td_33_Template, 3, 3, \"td\", 22);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(34, ManageFormLabelsComponent_tr_34_Template, 1, 3, \"tr\", 23);\n        i0.ɵɵtemplate(35, ManageFormLabelsComponent_tr_35_Template, 1, 0, \"tr\", 24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"div\", 25)(37, \"mat-paginator\", 26);\n        i0.ɵɵlistener(\"page\", function ManageFormLabelsComponent_Template_mat_paginator_page_37_listener($event) {\n          return ctx.pageChanged($event);\n        });\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.lang == \"en\" ? ctx.formBodyLabels[0].ManageAppLanguage.title : ctx.formBodyLabels[0].ManageAppLanguage.arabicTitle);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.lang == \"en\" ? ctx.formBodyLabels[0].Search.title : ctx.formBodyLabels[0].Search.arabicTitle);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"dataSource\", ctx.formTitleHd)(\"dir\", ctx.direction);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.columnsToDisplay)(\"matHeaderRowDefSticky\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.columnsToDisplay);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, !ctx.isLoadingCompleted));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(13, _c1));\n      }\n    },\n    dependencies: [i3.NgClass, i4.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i6.MatButton, i7.Dir, i8.MatTable, i8.MatHeaderCellDef, i8.MatHeaderRowDef, i8.MatColumnDef, i8.MatCellDef, i8.MatRowDef, i8.MatHeaderCell, i8.MatCell, i8.MatHeaderRow, i8.MatRow, i9.MatPaginator, i10.MatSort, i10.MatSortHeader, i11.MatFormField, i11.MatLabel, i11.MatPrefix, i11.MatSuffix, i12.MatInput, i13.MatIcon],\n    styles: [\".panel1bgColor[_ngcontent-%COMP%]{background-color:var(--sweet-brown)}tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#d8ecfa!important}.ArFontStyle[_ngcontent-%COMP%]{font-family:Cairo}.header_color[_ngcontent-%COMP%]{color:#fff!important}.table_header_bg[_ngcontent-%COMP%]{background-color:var(--english-vermillion)}.table_header_bg[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{color:#fff!important}\"]\n  });\n  return ManageFormLabelsComponent;\n})();\n\nfunction next(next, arg1, arg2) {\n  throw new Error('Function not implemented.');\n}","map":null,"metadata":{},"sourceType":"module"}