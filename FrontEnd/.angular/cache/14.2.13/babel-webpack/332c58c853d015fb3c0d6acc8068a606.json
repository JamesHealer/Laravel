{"ast":null,"code":"import _asyncToGenerator from \"I:/DESourceCode/GitHubApril2022/KupfAngular1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ChangeDetectorRef } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport { Observable, Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/modules/_services/login.service\";\nimport * as i4 from \"src/app/modules/auth\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"src/app/modules/_services/db-common.service\";\nimport * as i7 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i8 from \"src/app/modules/_services/common.service\";\nimport * as i9 from \"@angular/common\";\n\nfunction LoginComponent_div_26_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \"Please enter username\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginComponent_div_26_span_1_Template, 2, 0, \"span\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.username.errors == null ? null : ctx_r0.username.errors.required);\n  }\n}\n\nfunction LoginComponent_div_31_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter password \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginComponent_div_31_span_1_Template, 2, 0, \"span\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loginForm.controls[\"password\"].invalid && (ctx_r1.loginForm.controls[\"password\"].dirty || ctx_r1.loginForm.controls[\"password\"].touched));\n  }\n}\n\nfunction LoginComponent_div_36_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \"Please enter tenent Id\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginComponent_div_36_span_1_Template, 2, 0, \"span\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.tenentId.errors == null ? null : ctx_r2.tenentId.errors.required);\n  }\n}\n\nfunction LoginComponent_ng_container_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 30);\n    i0.ɵɵelement(2, \"span\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"display\", \"block\");\n  }\n}\n\nfunction LoginComponent_ng_container_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \" Login \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nexport class LoginComponent {\n  constructor(fb, router, loginService, authService, toastr, OccupationService, modalService, cd, commonService) {\n    this.fb = fb;\n    this.router = router;\n    this.loginService = loginService;\n    this.authService = authService;\n    this.toastr = toastr;\n    this.OccupationService = OccupationService;\n    this.modalService = modalService;\n    this.cd = cd;\n    this.commonService = commonService; //\n\n    this.loginDto = []; // private fields\n\n    this.unsubscribe = []; // Read more: => https://brianflove.com/2016/12/11/anguar-2-unsubscribe-observables/\n\n    this.closeResult = '';\n    this.model = {};\n    this.isSuccess = false; //\n\n    this.menuHeading = [];\n    this.cars = [{\n      id: 1,\n      name: 'Volvo'\n    }, {\n      id: 2,\n      name: 'Saab'\n    }, {\n      id: 3,\n      name: 'Opel'\n    }, {\n      id: 4,\n      name: 'Audi'\n    }];\n  }\n\n  ngOnInit() {\n    this.initForm();\n    this.isLoading$ = this.loginService.isLoading$;\n  }\n\n  initForm() {\n    this.loginForm = this.fb.group({\n      //username: prog1, password: Shakir\n      tenentId: new FormControl('21', Validators.required),\n      username: new FormControl('prog1', Validators.required),\n      password: new FormControl('U2hha2ly', Validators.required),\n      locations: ['']\n    });\n  } // To access username in .html file.\n\n\n  get username() {\n    return this.loginForm.get('username');\n  }\n\n  get tenentId() {\n    return this.loginForm.get('tenentId');\n  } //If user has multiple locations so login to the selected location...\n\n\n  onLocationChange(e) {\n    if (e.target.value != 0) {\n      if (e.target.value == '-Select-') {\n        this.toastr.error('Invalid Location');\n      } else {\n        // remove user if already exists...     \n        localStorage.removeItem(\"user\"); // filter loging dto by selected location...\n\n        this.lg = this.loginDto.find(ele => ele.locationId == e.target.value);\n        this.loginDto = [];\n        this.loginDto.push(this.lg);\n        localStorage.setItem(\"user\", JSON.stringify(this.loginDto));\n        this.router.navigateByUrl('/dashboard');\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    this.unsubscribe.forEach(sb => sb.unsubscribe());\n  } // User Login\n\n\n  login(form) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (form.valid) {\n        yield _this.loginService.Login([_this.loginForm.value.tenentId, _this.loginForm.value.username, _this.loginForm.value.password]).subscribe(response => {\n          _this.loginDto = response;\n\n          if (_this.loginDto.length == 0) {\n            _this.toastr.error('Invalid tenentId, username or password', 'Error');\n\n            _this.isSuccess = false;\n            _this.loginService.isLoading = false;\n          } else if (_this.loginDto.length == 1) {\n            _this.toastr.success('Login Success', 'Success');\n\n            _this.isSuccess = false;\n\n            if (localStorage.getItem('user') != null) {\n              localStorage.removeItem(\"user\");\n              localStorage.setItem(\"user\", JSON.stringify(_this.loginDto));\n            } else {\n              localStorage.setItem(\"user\", JSON.stringify(_this.loginDto));\n            }\n\n            const userJson = localStorage.getItem('user');\n\n            if (userJson) {\n              const userArray = JSON.parse(userJson);\n\n              if (userArray.length > 0) {\n                _this.authService.currentUserValue = userArray[0];\n                console.log(_this.authService.currentUserValue);\n              }\n            } // TO get UserMenu Options by UserId...\n\n\n            _this.loginService.GetUserFunctionsByUserId(_this.loginDto[0].userId).subscribe(response => {\n              _this.menuHeading = response;\n\n              if (localStorage.getItem('userMenu') != null) {\n                localStorage.removeItem(\"userMenu\");\n                localStorage.setItem('userMenu', JSON.stringify(_this.menuHeading));\n\n                _this.commonService.menuSessionUdpated.next({});\n              } else {\n                localStorage.setItem('userMenu', JSON.stringify(_this.menuHeading));\n\n                _this.commonService.menuSessionUdpated.next({});\n              }\n            });\n\n            _this.router.navigateByUrl('/dashboard');\n          } else if (_this.loginDto.length > 1) {\n            _this.toastr.success('Login Success', 'Success');\n\n            _this.router.navigateByUrl('/dashboard');\n\n            _this.locations = _this.loginDto;\n            _this.isSuccess = true; //this.cd.detectChanges();\n          }\n        });\n      } else {\n        Object.values(_this.loginForm.controls).forEach(control => control.markAsTouched());\n      }\n    })();\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.LoginService), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i5.ToastrService), i0.ɵɵdirectiveInject(i6.DbCommonService), i0.ɵɵdirectiveInject(i7.NgbModal), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i8.CommonService));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 50,\n  vars: 10,\n  consts: [[2, \"background-image\", \"url('assets/media/loginpage.jpg')\", \"height\", \"100vh\", \"width\", \"100vw\"], [1, \"\", 2, \"position\", \"absolute\", \"top\", \"50%\", \"left\", \"50%\", \"transform\", \"translate(-50%, -50%)\"], [1, \"w-lg-800px\", \"bg-white\", \"rounded\", \"shadow-sm\", \"p-10\", \"mx-auto\"], [1, \"d-flex\", \"mainDiv\"], [\"routerLink\", \"/\", 1, \"mb-2\"], [\"alt\", \"Logo\", \"src\", \"assets/media/logos/SSF logo.png\", 1, \"logoImg\"], [1, \"text-center\"], [\"alt\", \"Logo\", \"src\", \"assets/media/loginicon.jpg\", 1, \"rounded\", \"mx-auto\", \"d-block\", \"optionalLogo\"], [1, \"form\", \"w-100\", \"loginForm\", 2, \"direction\", \"ltr !important\", 3, \"formGroup\", \"ngSubmit\"], [1, \"text-center\", \"mb-2\"], [1, \"fs-1\", \"m-0\", \"signIn\"], [1, \"ArFontStyle\"], [1, \"text-center\", \"mb-4\"], [1, \"m-0\", \"ArFontStyle\", \"loginHeader\"], [1, \"row\", \"mb-6\"], [1, \"bi\", \"bi-person\", \"fs-2\", \"text-gray\"], [\"type\", \"email\", \"formControlName\", \"username\", \"required\", \"\", \"placeholder\", \"Username / \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\", 1, \"form-control\", \"form-control-lg\", \"pl-4\", \"form-control-solid\"], [4, \"ngIf\"], [1, \"bi\", \"bi-key\", \"fs-2\", \"text-gray\"], [\"type\", \"password\", \"formControlName\", \"password\", \"required\", \"\", \"placeholder\", \"Password / \\u0643\\u0644\\u0645\\u0647 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\", 1, \"form-control\", \"form-control-lg\", \"pl-4\", \"form-control-solid\"], [1, \"bi\", \"bi-plus-circle\", \"fs-2\", \"text-gray\"], [\"type\", \"text\", \"type\", \"text\", \"formControlName\", \"tenentId\", \"required\", \"\", \"placeholder\", \"Tenant Id / \\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0623\\u062C\\u0631\", 1, \"form-control\", \"form-control-lg\", \"form-control-solid\", 2, \"height\", \"30px\"], [1, \"row\", \"mb-4\"], [1, \"col-md-6\", \"text-left\"], [\"routerLink\", \"/auth/forgot-password\", 1, \"link-primary\", \"forgotPass\", \"fs-6\"], [1, \"col-md-6\", \"text-right\"], [\"routerLink\", \"/auth/forgot-password\", 1, \"link-primary\", \"forgotPass\", \"fs-6\", \"ArFontStyle\"], [\"type\", \"submit\", 1, \"loginBtn\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"text-danger\"], [1, \"indicator-progress\"], [1, \"spinner-border\", \"spinner-border-lg\", \"align-middle\", \"ms-2\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\")(5, \"div\")(6, \"a\", 4);\n      i0.ɵɵelement(7, \"img\", 5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 6);\n      i0.ɵɵelement(9, \"img\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\")(11, \"form\", 8);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_11_listener() {\n        return ctx.login(ctx.loginForm);\n      });\n      i0.ɵɵelementStart(12, \"div\", 9)(13, \"h1\", 10);\n      i0.ɵɵtext(14, \"Sign In / \");\n      i0.ɵɵelementStart(15, \"span\", 11);\n      i0.ɵɵtext(16, \" \\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(17, \"div\", 12)(18, \"h3\", 13);\n      i0.ɵɵtext(19, \"Enter your details to login to your account\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"h3\", 13);\n      i0.ɵɵtext(21, \"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u062E\\u0627\\u0635\\u0629 \\u0628\\u0643 \\u0644\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644 \\u0625\\u0644\\u0649 \\u062D\\u0633\\u0627\\u0628\\u0643\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 14)(23, \"div\");\n      i0.ɵɵelement(24, \"i\", 15)(25, \"input\", 16);\n      i0.ɵɵtemplate(26, LoginComponent_div_26_Template, 2, 1, \"div\", 17);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 14)(28, \"div\");\n      i0.ɵɵelement(29, \"i\", 18)(30, \"input\", 19);\n      i0.ɵɵtemplate(31, LoginComponent_div_31_Template, 2, 1, \"div\", 17);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 14)(33, \"div\");\n      i0.ɵɵelement(34, \"i\", 20)(35, \"input\", 21);\n      i0.ɵɵtemplate(36, LoginComponent_div_36_Template, 2, 1, \"div\", 17);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(37, \"div\", 22)(38, \"div\", 23)(39, \"a\", 24);\n      i0.ɵɵtext(40, \" Forgot Password ? \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(41, \"div\", 25)(42, \"a\", 26);\n      i0.ɵɵtext(43, \" ? \\u0633\\u064A\\u062A \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(44, \"div\", 6)(45, \"button\", 27);\n      i0.ɵɵtemplate(46, LoginComponent_ng_container_46_Template, 3, 2, \"ng-container\", 17);\n      i0.ɵɵpipe(47, \"async\");\n      i0.ɵɵtemplate(48, LoginComponent_ng_container_48_Template, 2, 0, \"ng-container\", 17);\n      i0.ɵɵpipe(49, \"async\");\n      i0.ɵɵelementEnd()()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", (ctx.username == null ? null : ctx.username.invalid) && (ctx.username == null ? null : ctx.username.touched) || (ctx.username == null ? null : ctx.username.dirty));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.controls[\"password\"].touched || ctx.loginForm.controls[\"password\"].dirty);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", (ctx.tenentId == null ? null : ctx.tenentId.invalid) && (ctx.tenentId == null ? null : ctx.tenentId.touched) || (ctx.tenentId == null ? null : ctx.tenentId.dirty));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(47, 6, ctx.isLoading$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(49, 8, ctx.isLoading$));\n    }\n  },\n  dependencies: [i9.NgIf, i2.RouterLinkWithHref, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i9.AsyncPipe],\n  styles: [\"[_nghost-%COMP%] {\\n  width: 100%;\\n}\\n@media (min-width: 992px) {\\n  [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%] {\\n    width: 100%;\\n    max-width: 450px;\\n  }\\n  [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n}\\n.ArFontStyle[_ngcontent-%COMP%] {\\n  font-family: Cairo;\\n}\\n.text-danger[_ngcontent-%COMP%] {\\n  position: absolute;\\n}\\n.form-control[_ngcontent-%COMP%] {\\n  background-color: #f0f4f6;\\n}\\ninput[_ngcontent-%COMP%] {\\n  border-radius: 50px;\\n  border: 1px solid #40484d !important;\\n  padding-left: 40px;\\n}\\ninput[_ngcontent-%COMP%]:hover {\\n  border: 1px solid #1e92db !important;\\n  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.2), 0 3px 20px 0 #86acc3 !important;\\n  transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);\\n}\\n.loginBtn[_ngcontent-%COMP%] {\\n  border: 1px solid #40484d;\\n  background-color: #1e92db;\\n  border-radius: 50px;\\n  color: #fff;\\n  padding: 10px 40px;\\n}\\n.loginBtn[_ngcontent-%COMP%] {\\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\\n  transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);\\n}\\n.loginBtn[_ngcontent-%COMP%]:after {\\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\\n  transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);\\n}\\n.loginBtn[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.02);\\n}\\n.forgotPass[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline !important;\\n}\\n.loginHeader[_ngcontent-%COMP%] {\\n  color: #1e92db;\\n}\\n.signIn[_ngcontent-%COMP%] {\\n  color: #0e537e;\\n}\\n.bi[_ngcontent-%COMP%] {\\n  position: absolute;\\n  margin: 13px;\\n  display: inline-block;\\n}\\n.optionalLogo[_ngcontent-%COMP%] {\\n  height: 280px;\\n  margin-top: 35px;\\n}\\n.logoImg[_ngcontent-%COMP%] {\\n  width: 380px;\\n  height: 70px;\\n}\\n.mainDiv[_ngcontent-%COMP%] {\\n  height: 460px;\\n}\\n@media screen and (max-width: 992px) {\\n  .optionalLogo[_ngcontent-%COMP%] {\\n    display: none !important;\\n  }\\n  .mainDiv[_ngcontent-%COMP%] {\\n    display: block !important;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtBQUNKO0FBQUk7RUFDRTtJQUNFLFdBQUE7SUFDQSxnQkFBQTtFQUVOO0VBQU07SUFDRSxXQUFBO0VBRVI7QUFDRjtBQUVFO0VBQ0Usa0JBQUE7QUFDSjtBQUdBO0VBQ0Usa0JBQUE7QUFBRjtBQUVBO0VBQ0UseUJBQUE7QUFDRjtBQUVBO0VBQ0UsbUJBQUE7RUFDQSxvQ0FBQTtFQUNBLGtCQUFBO0FBQ0Y7QUFFQTtFQUNFLG9DQUFBO0VBQ0EsMkVBQUE7RUFDQSx1REFBQTtBQUNGO0FBRUE7RUFDRSx5QkFBQTtFQUNBLHlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7QUFDRjtBQUVBO0VBQ0Usd0NBQUE7RUFDQSx1REFBQTtBQUNGO0FBRUE7RUFDRSx5Q0FBQTtFQUNBLHVEQUFBO0FBQ0Y7QUFFQTtFQUNFLHNCQUFBO0FBQ0Y7QUFDQTtFQUNFLHFDQUFBO0FBRUY7QUFDQTtFQUNFLGNBQUE7QUFFRjtBQUFBO0VBQ0UsY0FBQTtBQUdGO0FBREE7RUFDRSxrQkFBQTtFQUNFLFlBQUE7RUFDQSxxQkFBQTtBQUlKO0FBRkE7RUFDRSxhQUFBO0VBQ0EsZ0JBQUE7QUFLRjtBQUhBO0VBQ0UsWUFBQTtFQUFjLFlBQUE7QUFPaEI7QUFKQTtFQUNFLGFBQUE7QUFPRjtBQUxBO0VBQ0U7SUFDRSx3QkFBQTtFQVFGO0VBTkE7SUFDRSx5QkFBQTtFQVFGO0FBQ0YiLCJmaWxlIjoibG9naW4uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIEBtZWRpYSAobWluLXdpZHRoOiA5OTJweCkge1xyXG4gICAgICAubG9naW4tZm9ybSB7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgbWF4LXdpZHRoOiA0NTBweDtcclxuICBcclxuICAgICAgICAubWF0LWZvcm0tZmllbGQge1xyXG4gICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC5BckZvbnRTdHlsZXtcclxuICAgIGZvbnQtZmFtaWx5OiBDYWlybztcclxuICAgIC8vIGZvbnQtZmFtaWx5OiBcIlJlZW0gS3VmaSBGdW5cIjtcclxufVxyXG5cclxuLnRleHQtZGFuZ2Vye1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxufVxyXG4uZm9ybS1jb250cm9se1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmMGY0ZjY7XHJcbn1cclxuXHJcbmlucHV0e1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwcHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgIzQwNDg0ZCFpbXBvcnRhbnQ7XHJcbiAgcGFkZGluZy1sZWZ0OiA0MHB4O1xyXG59XHJcblxyXG5pbnB1dDpob3ZlcntcclxuICBib3JkZXI6IDFweCBzb2xpZCAjMWU5MmRiIWltcG9ydGFudDtcclxuICBib3gtc2hhZG93OiAwIDJweCA1cHggMCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgM3B4IDIwcHggMCAjODZhY2MzIWltcG9ydGFudDtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC42cyBjdWJpYy1iZXppZXIoMC4xNjUsIDAuODQsIDAuNDQsIDEpO1xyXG59XHJcbiAgXHJcbi5sb2dpbkJ0bntcclxuICBib3JkZXI6IDFweCBzb2xpZCAjNDA0ODRkO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMxZTkyZGI7XHJcbiAgYm9yZGVyLXJhZGl1czogNTBweDtcclxuICBjb2xvcjogI2ZmZjtcclxuICBwYWRkaW5nOiAxMHB4IDQwcHg7XHJcbn1cclxuXHJcbi5sb2dpbkJ0biB7XHJcbiAgYm94LXNoYWRvdzogMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC42cyBjdWJpYy1iZXppZXIoMC4xNjUsIDAuODQsIDAuNDQsIDEpO1xyXG59XHJcblxyXG4ubG9naW5CdG46YWZ0ZXIge1xyXG4gIGJveC1zaGFkb3c6IDAgNXB4IDE1cHggcmdiYSgwLCAwLCAwLCAwLjMpO1xyXG4gIHRyYW5zaXRpb246IGFsbCAuNnMgY3ViaWMtYmV6aWVyKDAuMTY1LCAwLjg0LCAwLjQ0LCAxKTtcclxufVxyXG5cclxuLmxvZ2luQnRuOmhvdmVyIHtcclxuICB0cmFuc2Zvcm06IHNjYWxlKDEuMDIpO1xyXG59XHJcbi5mb3Jnb3RQYXNzOmhvdmVye1xyXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lIWltcG9ydGFudDtcclxufVxyXG5cclxuLmxvZ2luSGVhZGVye1xyXG4gIGNvbG9yOiAjMWU5MmRiO1xyXG59XHJcbi5zaWduSW57XHJcbiAgY29sb3I6ICMwZTUzN2U7XHJcbn1cclxuLmJpe1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbjogMTNweDtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxufVxyXG4ub3B0aW9uYWxMb2dve1xyXG4gIGhlaWdodDogMjgwcHg7XHJcbiAgbWFyZ2luLXRvcDozNXB4XHJcbn1cclxuLmxvZ29JbWd7XHJcbiAgd2lkdGg6IDM4MHB4OyBoZWlnaHQ6IDcwcHg7XHJcbn1cclxuXHJcbi5tYWluRGl2e1xyXG4gIGhlaWdodDogNDYwcHg7XHJcbn1cclxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogOTkycHgpe1xyXG4gIC5vcHRpb25hbExvZ297XHJcbiAgICBkaXNwbGF5OiBub25lIWltcG9ydGFudDtcclxuICB9ICBcclxuICAubWFpbkRpdntcclxuICAgIGRpc3BsYXk6IGJsb2NrIWltcG9ydGFudDtcclxuICB9XHJcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ChangeDetectorRef","FormControl","Validators","Observable","Subscription","i0","LoginComponent","constructor","fb","router","loginService","authService","toastr","OccupationService","modalService","cd","commonService","id","name","ngOnInit","initForm","isLoading$","loginForm","group","tenentId","required","username","password","locations","get","onLocationChange","e","target","value","error","localStorage","removeItem","lg","loginDto","find","ele","locationId","push","setItem","JSON","stringify","navigateByUrl","ngOnDestroy","unsubscribe","forEach","sb","login","form","valid","Login","subscribe","response","length","isSuccess","isLoading","success","getItem","userJson","userArray","parse","currentUserValue","console","log","GetUserFunctionsByUserId","userId","menuHeading","menuSessionUdpated","next","Object","values","controls","control","markAsTouched","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["I:\\DESourceCode\\GitHubApril2022\\KupfAngular1\\src\\app\\modules\\home\\auth\\login\\login.component.ts","I:\\DESourceCode\\GitHubApril2022\\KupfAngular1\\src\\app\\modules\\home\\auth\\login\\login.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\r\nimport { AuthService } from 'src/app/modules/auth';\r\nimport { Login } from 'src/app/modules/models/login';\r\nimport { MenuHeading } from 'src/app/modules/models/MenuHeading';\r\nimport { UserFunctionDto } from 'src/app/modules/models/UserFunctions/UserFunctionDto';\r\nimport { CommonService } from 'src/app/modules/_services/common.service';\r\nimport { DbCommonService } from 'src/app/modules/_services/db-common.service';\r\nimport { LoginService } from 'src/app/modules/_services/login.service';\r\nimport { UserModel } from 'src/app/modules/auth';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss'],\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  hasError: boolean;\r\n  returnUrl: string;\r\n  isLoading$: Observable<boolean>;\r\n  \r\n  //\r\n  loginDto: Login[]=[];\r\n  // to put filtered user's data into localStorage\r\n  lg:Login;\r\n  // private fields\r\n  private unsubscribe: Subscription[] = []; // Read more: => https://brianflove.com/2016/12/11/anguar-2-unsubscribe-observables/\r\n  loginForm: FormGroup;\r\n  closeResult = '';\r\n  model: any = {}\r\n  isSuccess:boolean=false;\r\n  locations:any[];\r\n  //\r\n  menuHeading: MenuHeading[]=[];\r\n  \r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private router: Router,\r\n    private loginService: LoginService,\r\n    private authService: AuthService,\r\n    private toastr: ToastrService,\r\n    private OccupationService: DbCommonService,\r\n    private modalService: NgbModal,\r\n    private cd: ChangeDetectorRef,\r\n    private commonService: CommonService\r\n  ) {}\r\n\r\n  selectedCar: number;\r\n      cars = [\r\n          { id: 1, name: 'Volvo' },\r\n          { id: 2, name: 'Saab' },\r\n          { id: 3, name: 'Opel' },\r\n          { id: 4, name: 'Audi' },\r\n      ];\r\n      \r\n  ngOnInit(): void {  \r\n    this.initForm();\r\n    this.isLoading$ = this.loginService.isLoading$;\r\n  }\r\n  \r\n  initForm() {\r\n    this.loginForm = this.fb.group({\r\n      //username: prog1, password: Shakir\r\n        tenentId: new FormControl('21', Validators.required),\r\n        username: new FormControl('prog1', Validators.required),\r\n        password: new FormControl('U2hha2ly', Validators.required),\r\n        locations:['']\r\n    });\r\n  }\r\n  // To access username in .html file.\r\n  get username(){ return this.loginForm.get('username') }\r\n  get tenentId(){ return this.loginForm.get('tenentId') }\r\n  \r\n  //If user has multiple locations so login to the selected location...\r\n  onLocationChange(e:any){\r\n    if(e.target.value != 0){\r\n      if(e.target.value=='-Select-'){\r\n        this.toastr.error('Invalid Location')\r\n      }else{ \r\n        // remove user if already exists...     \r\n        localStorage.removeItem(\"user\");\r\n        // filter loging dto by selected location...\r\n        this.lg = this.loginDto.find(ele => ele.locationId == e.target.value)!;\r\n        this.loginDto = [];\r\n        this.loginDto.push(this.lg);\r\n        localStorage.setItem(\"user\",JSON.stringify(this.loginDto));      \r\n        this.router.navigateByUrl('/dashboard');\r\n      }    \r\n    }\r\n  }\r\n  ngOnDestroy() {\r\n    this.unsubscribe.forEach((sb) => sb.unsubscribe());\r\n  }\r\n  \r\n  // User Login\r\n  async login(form: any) {\r\n    if(form.valid) {\r\n      await this.loginService.Login([this.loginForm.value.tenentId,this.loginForm.value.username,this.loginForm.value.password])\r\n        .subscribe((response: Login[]) => {\r\n        this.loginDto = response\r\n        if(this.loginDto.length == 0) {\r\n          this.toastr.error('Invalid tenentId, username or password','Error');\r\n          this.isSuccess = false;\r\n          this.loginService.isLoading = false;\r\n        } else if(this.loginDto.length == 1) { \r\n          this.toastr.success('Login Success','Success');       \r\n          this.isSuccess = false;\r\n          if(localStorage.getItem('user') != null) {\r\n            localStorage.removeItem(\"user\");\r\n            localStorage.setItem(\"user\",JSON.stringify(this.loginDto));\r\n          } else {\r\n            localStorage.setItem(\"user\",JSON.stringify(this.loginDto));\r\n          }\r\n          const userJson = localStorage.getItem('user');\r\n          if (userJson) {\r\n            const userArray: UserModel[] = JSON.parse(userJson);\r\n            if (userArray.length > 0) {\r\n              this.authService.currentUserValue = userArray[0];\r\n              console.log(this.authService.currentUserValue)\r\n            }\r\n          }\r\n          // TO get UserMenu Options by UserId...\r\n          this.loginService.GetUserFunctionsByUserId(this.loginDto[0].userId).subscribe((response:any[])=>{\r\n            this.menuHeading = response;   \r\n             \r\n            if(localStorage.getItem('userMenu') != null) {\r\n              localStorage.removeItem(\"userMenu\");\r\n              localStorage.setItem('userMenu',JSON.stringify(this.menuHeading));\r\n              this.commonService.menuSessionUdpated.next({});\r\n            } else {\r\n              localStorage.setItem('userMenu',JSON.stringify(this.menuHeading));\r\n              this.commonService.menuSessionUdpated.next({});\r\n            }\r\n          });\r\n          this.router.navigateByUrl('/dashboard')      \r\n        } else if(this.loginDto.length > 1) {      \r\n          this.toastr.success('Login Success','Success'); \r\n          this.router.navigateByUrl('/dashboard')   \r\n          this.locations = this.loginDto;\r\n          this.isSuccess = true;\r\n          //this.cd.detectChanges();\r\n        }\r\n      })\r\n    } else {\r\n      Object.values(this.loginForm.controls).forEach(control => control.markAsTouched());\r\n    }\r\n  }\r\n}","<div style=\"background-image: url('assets/media/loginpage.jpg'); height: 100vh; width: 100vw;\">\r\n  <div class=\"\" style=\"position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\">\r\n    <div class=\"w-lg-800px bg-white rounded shadow-sm p-10 mx-auto\">\r\n      <div class=\"d-flex mainDiv\">\r\n        <div>\r\n          <div>\r\n            <a routerLink=\"/\" class=\"mb-2\">\r\n              <img alt=\"Logo\" src=\"assets/media/logos/SSF logo.png\" class=\"logoImg\" />\r\n            </a>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <img alt=\"Logo\" src=\"assets/media/loginicon.jpg\" class=\"rounded mx-auto d-block optionalLogo\" />\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <form class=\"form w-100 loginForm\" [formGroup]=\"loginForm\" (ngSubmit)=\"login(loginForm)\"\r\n            style=\"direction: ltr !important;\">\r\n            <div class=\"text-center mb-2\">\r\n              <h1 class=\"fs-1 m-0 signIn\">Sign In / <span class=\"ArFontStyle\"> تسجيل الدخول</span></h1>\r\n            </div>\r\n            <div class=\"text-center mb-4\">\r\n              <h3 class=\"m-0 ArFontStyle loginHeader\">Enter your details to login to your account</h3>\r\n              <h3 class=\"m-0 ArFontStyle loginHeader\">أدخل التفاصيل الخاصة بك لتسجيل الدخول إلى حسابك</h3>\r\n            </div>\r\n\r\n            <div class=\"row mb-6\">\r\n              <div>\r\n                <i class=\"bi bi-person fs-2 text-gray\"></i>\r\n                <input type=\"email\" class=\"form-control form-control-lg pl-4 form-control-solid\"\r\n                  formControlName=\"username\" required placeholder=\"Username / اسم المستخدم\" />\r\n                <div *ngIf=\"(username?.invalid && username?.touched) || username?.dirty\">\r\n                  <span *ngIf=\"username.errors?.required\" class=\"text-danger\">Please enter username</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-6\">\r\n              <div>\r\n                <i class=\"bi bi-key fs-2 text-gray\"></i>\r\n                <input type=\"password\" class=\"form-control form-control-lg pl-4 form-control-solid\"\r\n                  formControlName=\"password\" required placeholder=\"Password / كلمه المرور\" />\r\n                <div *ngIf=\"(loginForm.controls['password'].touched) || loginForm.controls['password'].dirty\">\r\n                  <span class=\"text-danger\" *ngIf=\"loginForm.controls['password'].invalid && (loginForm.controls['password'].dirty \r\n                      || loginForm.controls['password'].touched)\">\r\n                    Please enter password\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"row mb-6\">\r\n              <div>\r\n                <i class=\"bi bi-plus-circle fs-2 text-gray\"></i>\r\n                <input type=\"text\" style=\"height: 30px;\" type=\"text\"\r\n                  class=\"form-control form-control-lg form-control-solid\" formControlName=\"tenentId\" required\r\n                  placeholder=\"Tenant Id / معرف المستأجر\" />\r\n                <div *ngIf=\"(tenentId?.invalid && tenentId?.touched) || tenentId?.dirty\">\r\n                  <span *ngIf=\"tenentId.errors?.required\" class=\"text-danger\">Please enter tenent Id</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-4\">\r\n              <div class=\"col-md-6 text-left\">\r\n                <a routerLink=\"/auth/forgot-password\" class=\"link-primary forgotPass fs-6\">\r\n                  Forgot Password ?\r\n                </a>\r\n              </div>\r\n              <div class=\"col-md-6 text-right\">\r\n                <a routerLink=\"/auth/forgot-password\" class=\"link-primary forgotPass fs-6 ArFontStyle\">\r\n                  ? سيت كلمة المرور\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <button type=\"submit\" class=\"loginBtn\">\r\n                <ng-container *ngIf=\"isLoading$ | async\">\r\n                  <span class=\"indicator-progress\" [style.display]=\"'block'\">\r\n                    <span class=\"spinner-border spinner-border-lg align-middle ms-2\"></span>\r\n                  </span>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!(isLoading$ | async)\">\r\n                  Login\r\n                </ng-container>\r\n\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- \r\n<div class=\"\r\nd-flex\r\nflex-column flex-column-fluid\r\nbgi-position-y-bottom\r\nposition-x-center\r\nbgi-no-repeat bgi-size-contain \r\n\" style=\"background-image: url('assets/media/illustrations/sketchy-1/14.png');\">\r\n<div class=\"d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20\">\r\n<a routerLink=\"/\" class=\"mb-6\">\r\n  <img alt=\"Logo\" src=\"assets/media/logos/SSF logo.png\" style=\"width: 500px;height: 80px;\" />\r\n</a>\r\n<div class=\"w-lg-500px bg-white rounded shadow-sm p-10 p-lg-15 mx-auto\">      \r\n  <form class=\"form w-100 loginForm\" [formGroup]=\"loginForm\" (ngSubmit)=\"login(loginForm)\" style=\"direction: ltr !important;\">\r\n\r\n    <div class=\"text-center mb-7\">\r\n      <h1 class=\"text-dark mb-3\">Sign In</h1>\r\n      <h1 class=\"text-dark mb-3\">تسجيل الدخول</h1>\r\n    </div>\r\n    <div class=\"text-center mb-7\">\r\n      <h3 class=\"text-gray-400 mb-3 fw-bolder\">Enter your details to login to your account</h3>\r\n      <h3 class=\"text-gray-400 mb-3 fw-bolder\">أدخل التفاصيل الخاصة بك لتسجيل الدخول إلى حسابك</h3>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6 text-left\">\r\n        <label class=\"form-label fs-6 fw-bolder text-dark\">Tenant Id</label>\r\n      </div>          \r\n      <div class=\"col-md-6 text-right\">\r\n        <label class=\"form-label fs-6 fw-bolder text-dark ArFontStyle\" lang=\"AR-SA\">معرف المستأجر</label>\r\n      </div>\r\n    </div>\r\n    <div class=\"row mb-10\">\r\n      <input type=\"text\" class=\"form-control form-control-lg form-control-solid\" formControlName=\"tenentId\"\r\n        required placeholder=\"Tenant Id\"/>\r\n      <div *ngIf=\"(tenentId?.invalid && tenentId?.touched) || tenentId?.dirty\">\r\n        <span *ngIf=\"tenentId.errors?.required\" class=\"text-danger\">Please enter tenent Id</span>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"row\">\r\n      \r\n      <div class=\"col-md-6 text-left\">\r\n        <label class=\"form-label fs-6 fw-bolder text-dark \">Username</label>\r\n      </div>\r\n      <div class=\"col-md-6 text-right\">\r\n        <label class=\"form-label fs-6 fw-bolder text-dark ArFontStyle\" lang=\"AR-SA\">اسم المستخدم\r\n        </label>\r\n      </div>\r\n    </div>\r\n    <div class=\"row mb-10\">\r\n      <input type=\"email\" class=\"form-control form-control-lg form-control-solid\" formControlName=\"username\"\r\n        required placeholder=\"Username\"/>\r\n      <div *ngIf=\"(username?.invalid && username?.touched) || username?.dirty\">\r\n        <span *ngIf=\"username.errors?.required\" class=\"text-danger\">Please enter username</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      \r\n      <div class=\"col-md-6 text-left\">\r\n        <label class=\"form-label fw-bolder text-dark fs-6 mb-0\">Password </label>\r\n      </div>\r\n      <div class=\"col-md-6 text-right\">\r\n        <label class=\"form-label fw-bolder text-dark fs-6 mb-0 ArFontStyle\" lang=\"AR-SA\">كلمه المرور</label>\r\n      </div>\r\n    </div>\r\n    <div class=\"row mb-10\">\r\n      <input type=\"password\" class=\"form-control form-control-lg form-control-solid\" formControlName=\"password\"\r\n        required placeholder=\"Password\"/>\r\n      <span class=\"text-danger\" *ngIf=\"loginForm.controls['password'].invalid && (loginForm.controls['password'].dirty \r\n        || loginForm.controls['password'].touched)\">\r\n        Please enter password\r\n      </span>\r\n    </div>\r\n    <div class=\"row mb-4\">\r\n      <div class=\"col-md-6 text-left\">\r\n        <a routerLink=\"/auth/forgot-password\" class=\"link-primary fs-6 fw-bolder\">\r\n          ? Forgot Password\r\n        </a>\r\n      </div>\r\n      <div class=\"col-md-6 text-right\">\r\n        <a routerLink=\"/auth/forgot-password\" class=\"link-primary fs-6 fw-bolder\">\r\n          ? سيت كلمة المرور\r\n        </a>\r\n      </div>\r\n    </div>\r\n    <div class=\"text-center\">\r\n      <button type=\"submit\" class=\"btn btn-primary mb-5 mt-5\">\r\n          <ng-container *ngIf=\"isLoading$ | async\">\r\n            <span class=\"indicator-progress\" [style.display]=\"'block'\">\r\n              <span class=\"spinner-border spinner-border-lg align-middle ms-2\"></span>\r\n            </span>\r\n          </ng-container>\r\n        <ng-container *ngIf=\"!(isLoading$ | async)\">\r\n          <mat-icon aria-hidden=\"false\">login</mat-icon>\r\n        </ng-container>\r\n      </button>\r\n    </div>\r\n  </form>\r\n</div>\r\n</div>\r\n</div>\r\n\r\n\r\n -->\r\n\r\n<!-- \r\n  <div \r\n    style=\"background-image: url('../../../../../assets/media/loginpage.jpg');\">\r\n  <div class=\"d-flex flex-center flex-column flex-column-fluid p-2\">\r\n    <a routerLink=\"/\" class=\"mb-2\">\r\n      <img alt=\"Logo\" src=\"assets/media/logos/SSF logo.png\" style=\"width: 500px;height: 80px;\" />\r\n    </a>\r\n    <div class=\"w-lg-500px bg-white rounded shadow-sm p-10 mx-auto\">      \r\n      <form class=\"form w-100 loginForm\" [formGroup]=\"loginForm\" (ngSubmit)=\"login(loginForm)\" style=\"direction: ltr !important;\">\r\n        <div class=\"text-center mb-2\">\r\n          <h1 class=\"text-dark fs-1 m-0\">Sign In / <span class=\"ArFontStyle\"> تسجيل الدخول</span></h1>\r\n        </div>\r\n        <div class=\"text-center mb-4\">\r\n          <h3 class=\"text-gray-400 m-0 fw-bolder\">Enter your details to login to your account</h3>\r\n          <h3 class=\"text-gray-400 m-0 fw-bolder ArFontStyle\">أدخل التفاصيل الخاصة بك لتسجيل الدخول إلى حسابك</h3>\r\n        </div>\r\n        <div class=\"row\">          \r\n          <div class=\"col-md-6 text-left\">\r\n            <label class=\"form-label fs-6 fw-bolder text-dark \">Username</label>\r\n          </div>\r\n          <div class=\"col-md-6 text-right\">\r\n            <label class=\"form-label fs-6 fw-bolder text-dark ArFontStyle\" lang=\"AR-SA\">اسم المستخدم\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div class=\"row mb-6\">\r\n          <input type=\"email\" class=\"form-control form-control-lg form-control-solid\" formControlName=\"username\"\r\n            required placeholder=\"Username\"/>\r\n          <div *ngIf=\"(username?.invalid && username?.touched) || username?.dirty\">\r\n            <span *ngIf=\"username.errors?.required\" class=\"text-danger\">Please enter username</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">          \r\n          <div class=\"col-md-6 text-left\">\r\n            <label class=\"form-label fw-bolder text-dark fs-6 mb-0\">Password </label>\r\n          </div>\r\n          <div class=\"col-md-6 text-right\">\r\n            <label class=\"form-label fw-bolder text-dark fs-6 mb-0 ArFontStyle\" lang=\"AR-SA\">كلمه المرور</label>\r\n          </div>\r\n        </div>\r\n        <div class=\"row mb-6\">\r\n          <input type=\"password\" class=\"form-control form-control-lg form-control-solid\" formControlName=\"password\"\r\n            required placeholder=\"Password\"/>\r\n            <div *ngIf=\"(loginForm.controls['password'].touched) || loginForm.controls['password'].dirty\">\r\n              <span class=\"text-danger\" *ngIf=\"loginForm.controls['password'].invalid && (loginForm.controls['password'].dirty \r\n            || loginForm.controls['password'].touched)\">\r\n            Please enter password\r\n          </span>\r\n            </div>          \r\n        </div>\r\n\r\n        <div class=\"row mb-6\">\r\n          <div class=\"col d-flex justify-content-between\">\r\n            <label style=\"padding:4px 0px;\" class=\"form-label fs-6 fw-bolder text-dark\">Tenant Id</label>\r\n            <input type=\"text\" style=\"height: 30px;\" type=\"text\" class=\"form-control form-control-solid pl-3 w-50\" formControlName=\"tenentId\"\r\n            required placeholder=\"Tenant Id\"/>\r\n            <label style=\"padding:4px 0px;\" class=\"form-label fs-6 fw-bolder text-dark ArFontStyle\">معرف المستأجر </label>            \r\n          </div>       \r\n          <div *ngIf=\"(tenentId?.invalid && tenentId?.touched) || tenentId?.dirty\">\r\n            <span *ngIf=\"tenentId.errors?.required\" class=\"text-danger\">Please enter tenent Id</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mb-4\">\r\n          <div class=\"col-md-6 text-left\">\r\n            <a routerLink=\"/auth/forgot-password\" class=\"link-primary fs-6 fw-bolder\">\r\n              ? Forgot Password\r\n            </a>\r\n          </div>\r\n          <div class=\"col-md-6 text-right\">\r\n            <a routerLink=\"/auth/forgot-password\" class=\"link-primary fs-6 fw-bolder ArFontStyle\">\r\n              ? سيت كلمة المرور\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"text-center\">\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n              <ng-container *ngIf=\"isLoading$ | async\">\r\n                <span class=\"indicator-progress\" [style.display]=\"'block'\">\r\n                  <span class=\"spinner-border spinner-border-lg align-middle ms-2\"></span>\r\n                </span>\r\n              </ng-container>\r\n            <ng-container *ngIf=\"!(isLoading$ | async)\">\r\n              <mat-icon aria-hidden=\"false\">login</mat-icon>\r\n            </ng-container>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n  -->"]},"metadata":{},"sourceType":"module"}