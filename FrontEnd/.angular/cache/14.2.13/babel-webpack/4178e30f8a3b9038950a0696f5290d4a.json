{"ast":null,"code":"import { FormGroup, FormControl } from '@angular/forms';\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/_services/common.service\";\nimport * as i2 from \"src/app/modules/_services/communication.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"src/app/modules/_services/db-common.service\";\nimport * as i5 from \"@angular/forms\";\n\nfunction EmployeeDetailsWithHistoryComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"h3\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const label_r19 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.lang == \"en\" ? label_r19.headerName : \"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0644\\u0629 \\u0627\\u0644\\u0648\\u0627\\u0631\\u062F\\u0629 \", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_h3_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 26)(1, \"div\", 27)(2, \"button\", 28);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.lang == \"en\" ? \"Export to Excel\" : \"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0625\\u0644\\u0649 Excel\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.lang == \"en\" ? \"Print PDF\" : \"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u0642\\u0648\\u0627\\u062A \\u0627\\u0644\\u062F\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0634\\u0639\\u0628\\u064A\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"form\", 31)(2, \"div\", 32)(3, \"div\", 33)(4, \"label\", 34);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 35)(7, \"ng-select\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.formData.universityId = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 37)(9, \"label\", 34);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 35)(12, \"ng-select\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.formData.contractTypeId = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(13, \"div\", 39)(14, \"div\", 33)(15, \"label\", 34);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 40)(18, \"div\");\n    i0.ɵɵtext(19, \"From: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ng-select\", 41);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.formData.departmentIdFrom = $event);\n    })(\"change\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_change_20_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.onDepartmentFromChange());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"div\", 37);\n    i0.ɵɵelement(22, \"label\", 42);\n    i0.ɵɵelementStart(23, \"div\", 40)(24, \"div\");\n    i0.ɵɵtext(25, \"To: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"ng-select\", 43);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_26_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.formData.departmentIdTo = $event);\n    })(\"change\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_change_26_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.onDepartmentToChange());\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(27, \"div\", 39)(28, \"div\", 33)(29, \"label\", 44);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 40)(32, \"ng-select\", 45);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_32_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.formData.positionId = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"div\", 37)(34, \"label\", 44);\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"div\", 46)(37, \"ng-select\", 47);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_37_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.formData.serviceTypeId = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(38, \"div\", 39)(39, \"div\", 33)(40, \"label\", 44);\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"div\", 35)(43, \"div\");\n    i0.ɵɵtext(44, \"From: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"ng-select\", 48);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_45_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.formData.periodFrom = $event);\n    })(\"change\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_change_45_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.onPeriodFromChange());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(46, \"div\", 37);\n    i0.ɵɵelement(47, \"label\", 42);\n    i0.ɵɵelementStart(48, \"div\", 40)(49, \"div\");\n    i0.ɵɵtext(50, \"To: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"ng-select\", 49);\n    i0.ɵɵlistener(\"ngModelChange\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_ngModelChange_51_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r36 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r36.formData.periodTo = $event);\n    })(\"change\", function EmployeeDetailsWithHistoryComponent_div_7_Template_ng_select_change_51_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.onPeriodToChange());\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(52, \"div\", 50)(53, \"button\", 51);\n    i0.ɵɵlistener(\"click\", function EmployeeDetailsWithHistoryComponent_div_7_Template_button_click_53_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.filterRecords(0));\n    });\n    i0.ɵɵtext(54);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.employeeHistoryForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.lang == \"en\" ? \"University\" : \"\\u062C\\u0627\\u0645\\u0639\\u0629\", \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"items\", ctx_r2.universities)(\"ngModel\", ctx_r2.formData.universityId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.lang == \"en\" ? \"ContractType\" : \"\\u0639\\u0642\\u062F\", \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"items\", ctx_r2.contractTypes)(\"ngModel\", ctx_r2.formData.contractTypeId);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.lang == \"en\" ? \"Department\" : \"\\u0642\\u0633\\u0645\", \":\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"items\", ctx_r2.departments)(\"ngModel\", ctx_r2.formData.departmentIdFrom);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"items\", ctx_r2.departments)(\"ngModel\", ctx_r2.formData.departmentIdTo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.lang == \"en\" ? \"Position\" : \"\\u0645\\u0648\\u0636\\u0639\", \" : \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"items\", ctx_r2.occupations)(\"ngModel\", ctx_r2.formData.positionId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.lang == \"en\" ? \"Services\" : \"\\u062E\\u062F\\u0645\\u0627\\u062A\", \" : \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"items\", ctx_r2.serviceTypes)(\"ngModel\", ctx_r2.formData.serviceTypeId);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.lang == \"en\" ? \"Period\" : \"\\u0641\\u062A\\u0631\\u0629\", \" : \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"items\", ctx_r2.periods)(\"ngModel\", ctx_r2.formData.periodFrom);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"items\", ctx_r2.periods)(\"ngModel\", ctx_r2.formData.periodTo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.lang == \"en\" ? \"Go\" : \"\\u064A\\u0630\\u0647\\u0628\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.lang == \"ar\" ? \"\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641_PFID\" : \"Emp ID_PFID\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r39 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r39.empId);\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.lang == \"ar\" ? \"\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641_PFID\" : \"Name_Contract Type\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r40 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r40.contractType);\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_th_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r7.lang == \"ar\" ? \"\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641_PFID\" : \"Name_Contract Type\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r41 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r41.contractType);\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r9.lang == \"ar\" ? \"\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641_PFID\" : \"Name_Contract Type\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r42 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r42.contractType);\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_th_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r11.lang == \"ar\" ? \"\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641_PFID\" : \"Name_Contract Type\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_td_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r43 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r43.contractType);\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_th_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.lang == \"ar\" ? \"\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641_PFID\" : \"Name_Contract Type\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_td_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r44 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r44.contractType);\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_th_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r15.lang == \"ar\" ? \"\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641_PFID\" : \"Name_Contract Type\", \" \");\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_td_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r45 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r45.contractType);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"hidden\": a0\n  };\n};\n\nfunction EmployeeDetailsWithHistoryComponent_tr_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 54);\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(i0.ɵɵpureFunction1(2, _c0, !ctx_r17.isLoadingCompleted));\n  }\n}\n\nfunction EmployeeDetailsWithHistoryComponent_tr_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 55);\n  }\n}\n\nconst _c1 = function () {\n  return [10, 20, 30];\n};\n\nconst _c2 = function () {\n  return [10, 20, 50];\n};\n\nexport let EmployeeDetailsWithHistoryComponent = /*#__PURE__*/(() => {\n  class EmployeeDetailsWithHistoryComponent {\n    constructor(common, _communicationService, toastr, commonDbService, fb) {\n      this.common = common;\n      this._communicationService = _communicationService;\n      this.toastr = toastr;\n      this.commonDbService = commonDbService;\n      this.fb = fb; // We will filter form header labels array\n\n      this.formHeaderLabels = [];\n      this.lang = '';\n      this.pageSize = 10; // We will get form lables from lcale storage and will put into array.\n\n      this.AppFormLabels = []; // We will filter form body labels array\n\n      this.formBodyLabels = [];\n      this.tenentId = 0;\n      this.universities = [];\n      this.contractTypes = [];\n      this.departments = [];\n      this.occupations = [];\n      this.serviceTypes = [];\n      this.periods = [];\n      this.formData = {\n        universityId: 0,\n        contractTypeId: 0,\n        departmentIdFrom: 0,\n        departmentIdTo: 0,\n        positionId: 0,\n        serviceTypeId: 0,\n        periodFrom: 0,\n        periodTo: 0\n      }; // We need a normal array of data so we will subscribe to the observable and will get data\n\n      this.employeeHistoryDetailsDto = new MatTableDataSource([]); // To display table column headers\n\n      this.columnsToDisplay = ['empId', 'contractType', 'department', 'loadAmount', 'installment', 'paid', 'pen']; // Incase of any error will display error message.\n\n      this.dataLoadingStatus = ''; // True of any error\n\n      this.isError = false; // Hide footer while loading.\n\n      this.isLoadingCompleted = false;\n      this.masterServiceType$ = [];\n      this.formGroup = new FormGroup({\n        locationId: new FormControl(null),\n        contactId: new FormControl(null)\n      });\n      this.userParams = this._communicationService.getUserParams();\n    }\n\n    get empHistoryForm() {\n      return this.employeeHistoryForm.controls;\n    }\n\n    ngOnInit() {\n      this.tenentId = JSON.parse(localStorage.getItem('user') || '{}')[0].tenantId;\n      this.common.getLang().subscribe(lang => {\n        this.lang = lang;\n      });\n      this.formTitle = this.common.getFormTitle();\n      this.formTitle = ''; // #region TO SETUP THE FORM LOCALIZATION    \n      // TO GET THE LANGUAGE ID e.g. 1 = ENGLISH and 2 =  ARABIC\n\n      this.languageType = localStorage.getItem('langType'); // To get the selected language...\n\n      this.language = localStorage.getItem('lang'); // To setup the form id so will will get form labels based on form Id\n\n      this.formId = 'EmployeeHistoryDetails'; // Check if LocalStorage is Not NULL\n\n      if (localStorage.getItem('AppLabels') != null) {\n        // Get data from LocalStorage\n        this.AppFormLabels = JSON.parse(localStorage.getItem('AppLabels') || '{}');\n        let index = 0;\n\n        for (let labels of this.AppFormLabels) {\n          // console.log(\"labels\", labels)\n          if (labels.formID == this.formId && labels.language == this.languageType) {\n            this.formHeaderLabels.push(labels);\n            this.formBodyLabels.push(labels.formTitleDTLanguage);\n            console.log(this.formBodyLabels);\n          } else {\n            index++;\n\n            if (index === 1) {\n              this.formHeaderLabels.push({\n                \"headerName\": \"Employee History Details\",\n                \"formID\": \"EmployeeHistoryDetails\",\n                \"subHeaderName\": \"تفاصيل تاريخ الموظف\",\n                \"status\": \"Active\"\n              });\n              this.formBodyLabels.push(\"employeeHistoryDetail\");\n            }\n          }\n        }\n      }\n\n      this.getUniversities();\n      this.getDepartments();\n      this.getOccupations();\n      this.getServiceTypes();\n      this.getLocations();\n      this.getContractTypes();\n      this.getMasterContracts();\n      this.initializeSearchForm();\n      this.getPeriods();\n    }\n\n    loadData(pageIndex) {// this._communicationService.GetIncomingLetters(pageIndex + 1, this.pageSize, this.formGroup.value.searchTerm).subscribe((response: any) => {\n      //   this.incommingCommunicationDto = new MatTableDataSource<IncommingCommunicationDto>(response.body);\n      //  console.log(response.body)\n      //   this.incommingCommunicationDto.paginator = this.paginator;\n      //   this.incommingCommunicationDto.sort = this.sort;\n      //   this.isLoadingCompleted = true;\n      //   setTimeout(() => {\n      //     this.paginator.pageIndex = pageIndex;\n      //     this.paginator.length = response.body.totalRecords;\n      //   });\n      // }, error => {\n      //   console.log(error);\n      //   this.dataLoadingStatus = 'Error fetching the data';\n      //   this.isError = true;\n      // })\n    }\n\n    filterRecords(pageIndex) {\n      // if (this.formGroup.value.locationId != null && this.employeeHistoryDetailsDto) {\n      //   this.employeeHistoryDetailsDto.filter = this.formGroup.value.locationId.trim();\n      // }\n      if (this.formData.periodFrom > this.formData.periodTo) {\n        this.toastr.error(\"Please select Period correctly.\");\n        return;\n      }\n\n      this._communicationService.setUserParams(this.userParams);\n\n      this.isLoadingCompleted = true;\n\n      this._communicationService.GetEmployeeHistoryDetails(this.userParams, this.tenentId, this.formData.universityId, this.formData.contractTypeId, this.formData.departmentIdFrom, this.formData.departmentIdTo == 0 ? this.departments[this.departments.length - 1].refid : this.formData.departmentIdTo, this.formData.positionId, this.formData.serviceTypeId, this.formData.periodFrom, this.formData.periodTo).subscribe(response => {\n        console.log(response, 'getemployee history'); // this._communicationService.GetEmployeeHistoryDetails(this.userParams, \"\", val, val1, val2, this.urlServiceData.serviceTypeId, this.urlServiceData.subServiceTypeId).subscribe((response: any) => {\n      }, error => {\n        this.dataLoadingStatus = 'Error fetching the data';\n        this.isError = true;\n      });\n    }\n\n    getUniversities() {\n      this.commonDbService.GetUniversities().subscribe(data => {\n        console.log('universities', data);\n        this.universities = [{\n          univId: 0,\n          univName1: 'All Universities',\n          univName2: 'All Universities',\n          univName3: 'All Universities'\n        }, ...data];\n      });\n    }\n\n    getPeriods() {\n      this.commonDbService.GetPeriods().subscribe(data => {\n        console.log('Periods', data);\n        this.periods = [];\n        this.periods.push({\n          code: 0,\n          shortname: 'All Periods'\n        });\n\n        for (let i = 0; i < data.length; i++) {\n          this.periods.push({\n            code: data[i],\n            shortname: data[i].toString()\n          });\n        }\n      });\n    }\n\n    getServiceTypes() {\n      this.commonDbService.GetServiceType(this.tenentId).subscribe(data => {\n        console.log('serviceTypes', data);\n        this.serviceTypes = [{\n          refid: 0,\n          shortname: 'All ServiceTypes'\n        }, ...data];\n      });\n    }\n\n    getDepartments() {\n      this.commonDbService.GetDepartments().subscribe(data => {\n        console.log('departments', data);\n        this.departments = [{\n          refid: 0,\n          shortname: 'All Departments'\n        }, ...data];\n      });\n    }\n\n    getOccupations() {\n      this.commonDbService.GetOccupations().subscribe(data => {\n        console.log('occupations', data);\n        this.occupations = [{\n          refid: 0,\n          shortname: 'All Occupations'\n        }, ...data];\n      });\n    }\n\n    getLocations() {\n      this.commonDbService.getLocations().subscribe(data => {\n        console.log(\"localutons\", data);\n        this.locations = data;\n      });\n    }\n\n    getContractTypes() {\n      this.commonDbService.GetContractType().subscribe(data => {\n        console.log(\"contractTypes\", data);\n        this.contractTypes = [{\n          refid: 0,\n          shortname: 'All ContractTypes'\n        }, ...data];\n      });\n    }\n\n    getMasterContracts() {\n      this.commonDbService.GetMaterServiceTypes().subscribe(result => {\n        this.masterServiceType$ = result;\n      });\n    }\n\n    initializeSearchForm() {\n      this.employeeHistoryForm = this.fb.group({\n        universityId: new FormControl(''),\n        contractTypeId: new FormControl(''),\n        departmentIdFrom: new FormControl(''),\n        departmentIdTo: new FormControl(''),\n        positionId: new FormControl(''),\n        serviceTypeId: new FormControl(''),\n        periodFrom: new FormControl(''),\n        periodTo: new FormControl('')\n      }); // this.employeeHistoryForm.patchValue({\n      //   universityId: 0,\n      //   contractTypeId: 0,\n      //   departmentIdFrom: 0,\n      //   departmentIdTo: 0,\n      //   positionId: 0,\n      //   serviceId: 0,\n      //   periodFrom: 0,\n      //   periodTo: 0,\n      // })\n    }\n\n    pageChanged(event) {\n      if (event.pageIndex == 0) {\n        this.userParams.pageNumber = event.pageIndex + 1;\n      } else if (event.length <= event.pageIndex * event.pageSize + event.pageSize) {\n        this.userParams.pageNumber = event.pageIndex + 1;\n      } else if (event.previousPageIndex > event.pageIndex) {\n        this.userParams.pageNumber = event.pageIndex;\n      } else {\n        this.userParams.pageNumber = event.pageIndex + 1;\n      }\n\n      this.userParams.pageSize = event.pageSize; // this.financialService.setUserParams(this.userParams);\n\n      if (this.formGroup.value.searchTerm == null) {// this.loadData(event.pageIndex, 0, 0, 0);\n      } else if (this.formGroup.value.searchTerm.length > 0) {// this.filterRecords(event.pageIndex);\n      } else {// this.loadData(event.pageIndex, 0, 0, 0);\n      }\n    }\n\n    onDepartmentFromChange() {\n      if (this.formData.departmentIdFrom == 0) this.formData.departmentIdTo = 0;\n    }\n\n    onDepartmentToChange() {\n      if (this.formData.departmentIdTo == 0) this.formData.departmentIdFrom = 0;\n    }\n\n    onPeriodFromChange() {\n      if (this.formData.periodFrom == 0) this.formData.periodTo = 0;\n    }\n\n    onPeriodToChange() {\n      if (this.formData.periodTo == 0) this.formData.periodFrom = 0;\n    }\n\n  }\n\n  EmployeeDetailsWithHistoryComponent.ɵfac = function EmployeeDetailsWithHistoryComponent_Factory(t) {\n    return new (t || EmployeeDetailsWithHistoryComponent)(i0.ɵɵdirectiveInject(i1.CommonService), i0.ɵɵdirectiveInject(i2.CommunicationService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.DbCommonService), i0.ɵɵdirectiveInject(i5.FormBuilder));\n  };\n\n  EmployeeDetailsWithHistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EmployeeDetailsWithHistoryComponent,\n    selectors: [[\"app-employee-details-with-history\"]],\n    decls: 37,\n    vars: 16,\n    consts: [[1, \"card\", \"mb-5\", \"mb-xl-8\"], [1, \"card-header\", \"border-0\", \"pt-5\", \"panel1bgColor\"], [\"class\", \"card-toolbar\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"card-title align-items-start flex-column\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-body\", \"py-3\"], [1, \"w-100\", \"d-flex\", \"justify-content-center\"], [1, \"w-80\"], [\"class\", \"row mt-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"gx-9\", \"gy-6\"], [1, \"table-container\", \"service-details-table\"], [\"mat-table\", \"\", \"matSort\", \"\", 1, \"w-100\", 3, \"dataSource\"], [\"matColumnDef\", \"empId\"], [\"class\", \"tableArFontStyle\", \"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"ArFontStyle\", 4, \"matCellDef\"], [\"matColumnDef\", \"contractType\"], [\"matColumnDef\", \"department\"], [\"matColumnDef\", \"loadAmount\"], [\"matColumnDef\", \"installment\"], [\"matColumnDef\", \"paid\"], [\"matColumnDef\", \"pen\"], [\"mat-header-row\", \"\", \"class\", \"row_header\", 3, \"class\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"length\", \"pageSize\", \"pageSizeOptions\", \"page\"], [1, \"card-footer\"], [1, \"card-toolbar\"], [\"lang\", \"AR-SA\", \"id\", \"IncomingLetterDetails\", 1, \"text-white\", \"ArFontStyle\", \"header_color\"], [1, \"card-title\", \"align-items-start\", \"flex-column\"], [\"role\", \"group\", \"aria-label\", \"Basic example\", 1, \"btn-group\"], [\"type\", \"button\", \"routerLink\", \"/communication/add-incoming-letter\", 1, \"btn\", \"btn-primary\", \"light-sea-green\", \"mx-2\"], [\"type\", \"button\", \"lang\", \"AR-SA\", 1, \"btn\", \"btn-primary\", \"ArFontStyle\", \"light-sea-green\"], [1, \"row\", \"mt-3\"], [3, \"formGroup\"], [1, \"row\"], [1, \"col-md-6\", \"left-div\"], [\"lang\", \"AR-SA\", 1, \"col-lg-3\", \"col-form-label\", \"fw-bold\", \"fs-6\", \"ArFontStyle\", \"filter-label\"], [1, \"col-lg-9\"], [\"formControlName\", \"universityId\", \"bindLabel\", \"univName3\", \"bindValue\", \"univId\", 3, \"items\", \"ngModel\", \"ngModelChange\"], [1, \"col-md-6\", \"right-div\"], [\"bindValue\", \"refid\", \"bindLabel\", \"shortname\", \"formControlName\", \"contractTypeId\", 3, \"items\", \"ngModel\", \"ngModelChange\"], [1, \"row\", \"mt-4\"], [1, \"col-md-9\"], [\"formControlName\", \"departmentIdFrom\", \"bindValue\", \"refid\", \"bindLabel\", \"shortname\", 3, \"items\", \"ngModel\", \"ngModelChange\", \"change\"], [1, \"col-md-3\"], [\"formControlName\", \"departmentIdTo\", \"bindValue\", \"refid\", \"bindLabel\", \"shortname\", 3, \"items\", \"ngModel\", \"ngModelChange\", \"change\"], [\"lang\", \"AR-SA\", 1, \"col-md-3\", \"col-form-label\", \"fw-bold\", \"fs-6\", \"ArFontStyle\", \"filter-label\"], [\"formControlName\", \"positionId\", \"bindValue\", \"refid\", \"bindLabel\", \"shortname\", 3, \"items\", \"ngModel\", \"ngModelChange\"], [1, \"col-md-9\", \"fv-row\"], [\"formControlName\", \"serviceTypeId\", \"bindValue\", \"refid\", \"bindLabel\", \"shortname\", 3, \"items\", \"ngModel\", \"ngModelChange\"], [\"formControlName\", \"periodFrom\", \"bindValue\", \"code\", \"bindLabel\", \"shortname\", 3, \"items\", \"ngModel\", \"ngModelChange\", \"change\"], [\"formControlName\", \"periodTo\", \"bindValue\", \"code\", \"bindLabel\", \"shortname\", 3, \"items\", \"ngModel\", \"ngModelChange\", \"change\"], [1, \"mt-6\", \"d-flex\", \"justify-content-end\"], [\"type\", \"button\", \"lang\", \"AR-SA\", 1, \"btn\", \"btn-primary\", \"light-sea-green\", 3, \"click\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 1, \"tableArFontStyle\"], [\"mat-cell\", \"\", 1, \"ArFontStyle\"], [\"mat-header-row\", \"\", 1, \"row_header\"], [\"mat-row\", \"\"]],\n    template: function EmployeeDetailsWithHistoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, EmployeeDetailsWithHistoryComponent_div_2_Template, 3, 1, \"div\", 2);\n        i0.ɵɵtemplate(3, EmployeeDetailsWithHistoryComponent_h3_3_Template, 6, 2, \"h3\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6);\n        i0.ɵɵtemplate(7, EmployeeDetailsWithHistoryComponent_div_7_Template, 55, 24, \"div\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 8)(9, \"div\", 9)(10, \"table\", 10);\n        i0.ɵɵelementContainerStart(11, 11);\n        i0.ɵɵtemplate(12, EmployeeDetailsWithHistoryComponent_th_12_Template, 2, 1, \"th\", 12);\n        i0.ɵɵtemplate(13, EmployeeDetailsWithHistoryComponent_td_13_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(14, 14);\n        i0.ɵɵtemplate(15, EmployeeDetailsWithHistoryComponent_th_15_Template, 2, 1, \"th\", 12);\n        i0.ɵɵtemplate(16, EmployeeDetailsWithHistoryComponent_td_16_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(17, 15);\n        i0.ɵɵtemplate(18, EmployeeDetailsWithHistoryComponent_th_18_Template, 2, 1, \"th\", 12);\n        i0.ɵɵtemplate(19, EmployeeDetailsWithHistoryComponent_td_19_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(20, 16);\n        i0.ɵɵtemplate(21, EmployeeDetailsWithHistoryComponent_th_21_Template, 2, 1, \"th\", 12);\n        i0.ɵɵtemplate(22, EmployeeDetailsWithHistoryComponent_td_22_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(23, 17);\n        i0.ɵɵtemplate(24, EmployeeDetailsWithHistoryComponent_th_24_Template, 2, 1, \"th\", 12);\n        i0.ɵɵtemplate(25, EmployeeDetailsWithHistoryComponent_td_25_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(26, 18);\n        i0.ɵɵtemplate(27, EmployeeDetailsWithHistoryComponent_th_27_Template, 2, 1, \"th\", 12);\n        i0.ɵɵtemplate(28, EmployeeDetailsWithHistoryComponent_td_28_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(29, 19);\n        i0.ɵɵtemplate(30, EmployeeDetailsWithHistoryComponent_th_30_Template, 2, 1, \"th\", 12);\n        i0.ɵɵtemplate(31, EmployeeDetailsWithHistoryComponent_td_31_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(32, EmployeeDetailsWithHistoryComponent_tr_32_Template, 1, 4, \"tr\", 20);\n        i0.ɵɵtemplate(33, EmployeeDetailsWithHistoryComponent_tr_33_Template, 1, 0, \"tr\", 21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(34, \"div\")(35, \"mat-paginator\", 22);\n        i0.ɵɵlistener(\"page\", function EmployeeDetailsWithHistoryComponent_Template_mat_paginator_page_35_listener($event) {\n          return ctx.pageChanged($event);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(36, \"div\", 23);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.formHeaderLabels);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.formBodyLabels);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.formBodyLabels);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"dataSource\", ctx.employeeHistoryDetailsDto);\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.columnsToDisplay)(\"matHeaderRowDefSticky\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.columnsToDisplay);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassMap(i0.ɵɵpureFunction1(12, _c0, !ctx.isLoadingCompleted));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"length\", 10)(\"pageSize\", i0.ɵɵpureFunction0(14, _c1))(\"pageSizeOptions\", i0.ɵɵpureFunction0(15, _c2));\n      }\n    },\n    styles: [\".panel1bgColor[_ngcontent-%COMP%]{background-color:var(--fluroscent-blue)}.ArFontStyle[_ngcontent-%COMP%]{font-family:Cairo;display:flex;justify-content:end}.tableArFontStyle[_ngcontent-%COMP%]{font-family:Cairo}.filter-label[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:center;text-align:right}.header_color[_ngcontent-%COMP%]{color:#000!important}.light-sea-green[_ngcontent-%COMP%]{background-color:var(--light-sea-green)!important}.light-sea-green.btn.btn-primary[_ngcontent-%COMP%]:hover, .light-sea-green.btn.btn-primary[_ngcontent-%COMP%]:focus, .light-sea-green.btn.btn-primary[_ngcontent-%COMP%]:active{background-color:var(--comm-btn-hover)!important}.filter-btn-div[_ngcontent-%COMP%]{display:flex;justify-content:end;padding-right:200px}.t_row_header[_ngcontent-%COMP%]{background-color:#8fdedc!important}.row_header[_ngcontent-%COMP%]{background-color:var(--leaf);color:#fff!important}.mat-sort-header-content[_ngcontent-%COMP%]{text-align:center;display:flex;align-items:center}.left-div[_ngcontent-%COMP%]{display:flex;justify-content:center}.right-div[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}\"]\n  });\n  return EmployeeDetailsWithHistoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}